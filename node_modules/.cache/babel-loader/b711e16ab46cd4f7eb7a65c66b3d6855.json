{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EndpointParameterDefinition = exports.EndpointModifiers = exports.EndpointDefinition = void 0;\n\nconst typeExpressionParser_1 = require(\"./typeExpressionParser\");\n\nconst NamePlaceholder = \"?\";\nconst DescriptionPlaceholder = \"N / A\";\n\nclass EndpointDefinition {\n  constructor(name, input, output, modifiers) {\n    this.input = [];\n    this.output = [];\n    this.name = name;\n    this.input = input || [];\n    this.output = output || [];\n    this.modifiers = modifiers;\n  }\n\n  isConstructor() {\n    return this.name == \"constructor\";\n  }\n\n  static fromJSON(json) {\n    json.name = json.name == null ? NamePlaceholder : json.name;\n    json.payableInTokens = json.payableInTokens || [];\n    json.inputs = json.inputs || [];\n    json.outputs = json.outputs || [];\n    let input = json.inputs.map(param => EndpointParameterDefinition.fromJSON(param));\n    let output = json.outputs.map(param => EndpointParameterDefinition.fromJSON(param));\n    let modifiers = new EndpointModifiers(json.storageModifier, json.payableInTokens);\n    return new EndpointDefinition(json.name, input, output, modifiers);\n  }\n\n}\n\nexports.EndpointDefinition = EndpointDefinition;\n\nclass EndpointModifiers {\n  constructor(storageModifier, payableInTokens) {\n    this.storageModifier = storageModifier || \"\";\n    this.payableInTokens = payableInTokens || [];\n  }\n\n  isPayableInEGLD() {\n    return this.isPayableInToken(\"EGLD\");\n  }\n\n  isPayableInToken(token) {\n    if (this.payableInTokens.includes(token)) {\n      return true;\n    }\n\n    if (this.payableInTokens.includes(`!${token}`)) {\n      return false;\n    }\n\n    if (this.payableInTokens.includes(\"*\")) {\n      return true;\n    }\n\n    return false;\n  }\n\n  isPayable() {\n    return this.payableInTokens.length != 0;\n  }\n\n  isReadonly() {\n    return this.storageModifier == \"readonly\";\n  }\n\n}\n\nexports.EndpointModifiers = EndpointModifiers;\n\nclass EndpointParameterDefinition {\n  constructor(name, description, type) {\n    this.name = name;\n    this.description = description;\n    this.type = type;\n  }\n\n  static fromJSON(json) {\n    let parsedType = new typeExpressionParser_1.TypeExpressionParser().parse(json.type);\n    return new EndpointParameterDefinition(json.name || NamePlaceholder, json.description || DescriptionPlaceholder, parsedType);\n  }\n\n}\n\nexports.EndpointParameterDefinition = EndpointParameterDefinition;","map":{"version":3,"mappings":";;;;;;;AAAA;;AAGA,MAAMA,eAAe,GAAG,GAAxB;AACA,MAAMC,sBAAsB,GAAG,OAA/B;;AAEA,MAAaC,kBAAb,CAA+B;AAM3BC,cAAYC,IAAZ,EAA0BC,KAA1B,EAAgEC,MAAhE,EAAuGC,SAAvG,EAAmI;AAJ1H,iBAAuC,EAAvC;AACA,kBAAwC,EAAxC;AAIL,SAAKH,IAAL,GAAYA,IAAZ;AACA,SAAKC,KAAL,GAAaA,KAAK,IAAI,EAAtB;AACA,SAAKC,MAAL,GAAcA,MAAM,IAAI,EAAxB;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACH;;AAEDC,eAAa;AACT,WAAO,KAAKJ,IAAL,IAAa,aAApB;AACH;;AAEc,SAARK,QAAQ,CAACC,IAAD,EAMd;AACGA,QAAI,CAACN,IAAL,GAAYM,IAAI,CAACN,IAAL,IAAa,IAAb,GAAoBJ,eAApB,GAAsCU,IAAI,CAACN,IAAvD;AACAM,QAAI,CAACC,eAAL,GAAuBD,IAAI,CAACC,eAAL,IAAwB,EAA/C;AACAD,QAAI,CAACE,MAAL,GAAcF,IAAI,CAACE,MAAL,IAAe,EAA7B;AACAF,QAAI,CAACG,OAAL,GAAeH,IAAI,CAACG,OAAL,IAAgB,EAA/B;AAEA,QAAIR,KAAK,GAAGK,IAAI,CAACE,MAAL,CAAYE,GAAZ,CAAgBC,KAAK,IAAIC,2BAA2B,CAACP,QAA5B,CAAqCM,KAArC,CAAzB,CAAZ;AACA,QAAIT,MAAM,GAAGI,IAAI,CAACG,OAAL,CAAaC,GAAb,CAAiBC,KAAK,IAAIC,2BAA2B,CAACP,QAA5B,CAAqCM,KAArC,CAA1B,CAAb;AACA,QAAIR,SAAS,GAAG,IAAIU,iBAAJ,CAAsBP,IAAI,CAACQ,eAA3B,EAA4CR,IAAI,CAACC,eAAjD,CAAhB;AAEA,WAAO,IAAIT,kBAAJ,CAAuBQ,IAAI,CAACN,IAA5B,EAAkCC,KAAlC,EAAyCC,MAAzC,EAAiDC,SAAjD,CAAP;AACH;;AAlC0B;;AAA/BY;;AAqCA,MAAaF,iBAAb,CAA8B;AAI1Bd,cAAYe,eAAZ,EAAqCP,eAArC,EAA8D;AAC1D,SAAKO,eAAL,GAAuBA,eAAe,IAAI,EAA1C;AACA,SAAKP,eAAL,GAAuBA,eAAe,IAAI,EAA1C;AACH;;AAEDS,iBAAe;AACX,WAAO,KAAKC,gBAAL,CAAsB,MAAtB,CAAP;AACH;;AAEDA,kBAAgB,CAACC,KAAD,EAAc;AAC1B,QAAI,KAAKX,eAAL,CAAqBY,QAArB,CAA8BD,KAA9B,CAAJ,EAA0C;AACtC,aAAO,IAAP;AACH;;AAED,QAAI,KAAKX,eAAL,CAAqBY,QAArB,CAA8B,IAAID,KAAK,EAAvC,CAAJ,EAAgD;AAC5C,aAAO,KAAP;AACH;;AAED,QAAI,KAAKX,eAAL,CAAqBY,QAArB,CAA8B,GAA9B,CAAJ,EAAwC;AACpC,aAAO,IAAP;AACH;;AAED,WAAO,KAAP;AACH;;AAEDC,WAAS;AACL,WAAO,KAAKb,eAAL,CAAqBc,MAArB,IAA+B,CAAtC;AACH;;AAEDC,YAAU;AACN,WAAO,KAAKR,eAAL,IAAwB,UAA/B;AACH;;AAnCyB;;AAA9BC;;AAsCA,MAAaH,2BAAb,CAAwC;AAKpCb,cAAYC,IAAZ,EAA0BuB,WAA1B,EAA+CC,IAA/C,EAAyD;AACrD,SAAKxB,IAAL,GAAYA,IAAZ;AACA,SAAKuB,WAAL,GAAmBA,WAAnB;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACH;;AAEc,SAARnB,QAAQ,CAACC,IAAD,EAA4D;AACvE,QAAImB,UAAU,GAAG,IAAIC,2CAAJ,GAA2BC,KAA3B,CAAiCrB,IAAI,CAACkB,IAAtC,CAAjB;AACA,WAAO,IAAIZ,2BAAJ,CAAgCN,IAAI,CAACN,IAAL,IAAaJ,eAA7C,EAA8DU,IAAI,CAACiB,WAAL,IAAoB1B,sBAAlF,EAA0G4B,UAA1G,CAAP;AACH;;AAdmC;;AAAxCV","names":["NamePlaceholder","DescriptionPlaceholder","EndpointDefinition","constructor","name","input","output","modifiers","isConstructor","fromJSON","json","payableInTokens","inputs","outputs","map","param","EndpointParameterDefinition","EndpointModifiers","storageModifier","exports","isPayableInEGLD","isPayableInToken","token","includes","isPayable","length","isReadonly","description","type","parsedType","typeExpressionParser_1","parse"],"sourceRoot":"","sources":["../../../src/smartcontracts/typesystem/endpoint.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}