{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.QueryResponse = void 0;\n\nconst networkParams_1 = require(\"../networkParams\");\n\nconst query_1 = require(\"./query\");\n\nconst returnCode_1 = require(\"./returnCode\");\n\nconst bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\n\nconst result_1 = require(\"./result\");\n\nclass QueryResponse {\n  constructor(init) {\n    this.returnData = (init === null || init === void 0 ? void 0 : init.returnData) || [];\n    this.returnCode = (init === null || init === void 0 ? void 0 : init.returnCode) || returnCode_1.ReturnCode.Unknown;\n    this.returnMessage = (init === null || init === void 0 ? void 0 : init.returnMessage) || \"\";\n    this.gasUsed = (init === null || init === void 0 ? void 0 : init.gasUsed) || networkParams_1.GasLimit.min();\n  }\n  /**\n   * Constructs a QueryResponse object from a HTTP response (as returned by the provider).\n   */\n\n\n  static fromHttpResponse(payload) {\n    let returnData = payload[\"returnData\"] || payload[\"ReturnData\"];\n    let returnCode = payload[\"returnCode\"] || payload[\"ReturnCode\"];\n    let returnMessage = payload[\"returnMessage\"] || payload[\"ReturnMessage\"];\n    let gasRemaining = new bignumber_js_1.default(payload[\"gasRemaining\"] || payload[\"GasRemaining\"] || 0);\n    let gasUsed = new networkParams_1.GasLimit(query_1.MaxUint64.minus(gasRemaining).toNumber());\n    return new QueryResponse({\n      returnData: returnData,\n      returnCode: new returnCode_1.ReturnCode(returnCode),\n      returnMessage: returnMessage,\n      gasUsed: gasUsed\n    });\n  }\n\n  getEndpointDefinition() {\n    return this.endpointDefinition;\n  }\n\n  getReturnCode() {\n    return this.returnCode;\n  }\n\n  getReturnMessage() {\n    return this.returnMessage;\n  }\n\n  unpackOutput() {\n    return result_1.Result.unpackOutput(this);\n  }\n\n  assertSuccess() {\n    result_1.Result.assertSuccess(this);\n  }\n\n  isSuccess() {\n    return this.returnCode.isSuccess();\n  }\n\n  setEndpointDefinition(endpointDefinition) {\n    this.endpointDefinition = endpointDefinition;\n  }\n\n  outputUntyped() {\n    this.assertSuccess();\n    let buffers = this.returnData.map(item => Buffer.from(item || \"\", \"base64\"));\n    return buffers;\n  }\n\n  outputTyped() {\n    return result_1.Result.outputTyped(this);\n  }\n  /**\n   * Converts the object to a pretty, plain JavaScript object.\n   */\n\n\n  toJSON() {\n    return {\n      success: this.isSuccess(),\n      returnData: this.returnData,\n      returnCode: this.returnCode,\n      returnMessage: this.returnMessage,\n      gasUsed: this.gasUsed.valueOf()\n    };\n  }\n\n}\n\nexports.QueryResponse = QueryResponse;","map":{"version":3,"mappings":";;;;;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AAEA,MAAaA,aAAb,CAA0B;AAWtBC,cAAYC,IAAZ,EAAyC;AACrC,SAAKC,UAAL,GAAkB,KAAI,SAAJ,QAAI,WAAJ,GAAI,MAAJ,OAAI,CAAEA,UAAN,KAAoB,EAAtC;AACA,SAAKC,UAAL,GAAkB,KAAI,SAAJ,QAAI,WAAJ,GAAI,MAAJ,OAAI,CAAEA,UAAN,KAAoBC,wBAAWC,OAAjD;AACA,SAAKC,aAAL,GAAqB,KAAI,SAAJ,QAAI,WAAJ,GAAI,MAAJ,OAAI,CAAEA,aAAN,KAAuB,EAA5C;AACA,SAAKC,OAAL,GAAe,KAAI,SAAJ,QAAI,WAAJ,GAAI,MAAJ,OAAI,CAAEA,OAAN,KAAiBC,yBAASC,GAAT,EAAhC;AACH;AAED;;;;;AAGuB,SAAhBC,gBAAgB,CAACC,OAAD,EAAa;AAChC,QAAIT,UAAU,GAAaS,OAAO,CAAC,YAAD,CAAP,IAAyBA,OAAO,CAAC,YAAD,CAA3D;AACA,QAAIR,UAAU,GAAGQ,OAAO,CAAC,YAAD,CAAP,IAAyBA,OAAO,CAAC,YAAD,CAAjD;AACA,QAAIL,aAAa,GAAGK,OAAO,CAAC,eAAD,CAAP,IAA4BA,OAAO,CAAC,eAAD,CAAvD;AACA,QAAIC,YAAY,GAAG,IAAIC,sBAAJ,CAAcF,OAAO,CAAC,cAAD,CAAP,IAA2BA,OAAO,CAAC,cAAD,CAAlC,IAAsD,CAApE,CAAnB;AACA,QAAIJ,OAAO,GAAG,IAAIC,wBAAJ,CAAaM,kBAAUC,KAAV,CAAgBH,YAAhB,EAA8BI,QAA9B,EAAb,CAAd;AAEA,WAAO,IAAIjB,aAAJ,CAAkB;AACrBG,gBAAU,EAAEA,UADS;AAErBC,gBAAU,EAAE,IAAIC,uBAAJ,CAAeD,UAAf,CAFS;AAGrBG,mBAAa,EAAEA,aAHM;AAIrBC,aAAO,EAAEA;AAJY,KAAlB,CAAP;AAMH;;AAEDU,uBAAqB;AACjB,WAAO,KAAKC,kBAAZ;AACH;;AACDC,eAAa;AACT,WAAO,KAAKhB,UAAZ;AACH;;AACDiB,kBAAgB;AACZ,WAAO,KAAKd,aAAZ;AACH;;AACDe,cAAY;AACR,WAAOC,gBAAOD,YAAP,CAAoB,IAApB,CAAP;AACH;;AAEDE,eAAa;AACTD,oBAAOC,aAAP,CAAqB,IAArB;AACH;;AAEDC,WAAS;AACL,WAAO,KAAKrB,UAAL,CAAgBqB,SAAhB,EAAP;AACH;;AAEDC,uBAAqB,CAACP,kBAAD,EAAuC;AACxD,SAAKA,kBAAL,GAA0BA,kBAA1B;AACH;;AAEDQ,eAAa;AACT,SAAKH,aAAL;AAEA,QAAII,OAAO,GAAG,KAAKzB,UAAL,CAAgB0B,GAAhB,CAAqBC,IAAD,IAAUC,MAAM,CAACC,IAAP,CAAYF,IAAI,IAAI,EAApB,EAAwB,QAAxB,CAA9B,CAAd;AACA,WAAOF,OAAP;AACH;;AAEDK,aAAW;AACP,WAAOV,gBAAOU,WAAP,CAAmB,IAAnB,CAAP;AACH;AAED;;;;;AAGAC,QAAM;AACF,WAAO;AACHC,aAAO,EAAE,KAAKV,SAAL,EADN;AAEHtB,gBAAU,EAAE,KAAKA,UAFd;AAGHC,gBAAU,EAAE,KAAKA,UAHd;AAIHG,mBAAa,EAAE,KAAKA,aAJjB;AAKHC,aAAO,EAAE,KAAKA,OAAL,CAAa4B,OAAb;AALN,KAAP;AAOH;;AAnFqB;;AAA1BC","names":["QueryResponse","constructor","init","returnData","returnCode","returnCode_1","Unknown","returnMessage","gasUsed","networkParams_1","min","fromHttpResponse","payload","gasRemaining","bignumber_js_1","query_1","minus","toNumber","getEndpointDefinition","endpointDefinition","getReturnCode","getReturnMessage","unpackOutput","result_1","assertSuccess","isSuccess","setEndpointDefinition","outputUntyped","buffers","map","item","Buffer","from","outputTyped","toJSON","success","valueOf","exports"],"sourceRoot":"","sources":["../../src/smartcontracts/queryResponse.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}