{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.generateAddress = exports.generatePubKey = exports.hexStr2byteArray = void 0;\n/* tslint:disable:no-bitwise */\n\nconst elliptic_1 = require(\"elliptic\");\n\nconst js_sha3_1 = require(\"js-sha3\");\n\nconst hexChar2byte = c => {\n  let d = 0;\n  if (c >= 'A' && c <= 'F') d = c.charCodeAt(0) - 'A'.charCodeAt(0) + 10;else if (c >= 'a' && c <= 'f') d = c.charCodeAt(0) - 'a'.charCodeAt(0) + 10;else if (c >= '0' && c <= '9') d = c.charCodeAt(0) - '0'.charCodeAt(0);\n  return d;\n};\n\nconst isHexChar = c => {\n  if (c >= 'A' && c <= 'F' || c >= 'a' && c <= 'f' || c >= '0' && c <= '9') {\n    return 1;\n  }\n\n  return 0;\n};\n\nconst hexStr2byteArray = str => {\n  const byteArray = [];\n  let d = 0;\n  let j = 0;\n  let k = 0;\n\n  for (let i = 0; i < str.length; i++) {\n    const c = str.charAt(i);\n\n    if (isHexChar(c)) {\n      d <<= 4;\n      d += hexChar2byte(c);\n      j++;\n\n      if (0 === j % 2) {\n        byteArray[k++] = d;\n        d = 0;\n      }\n    }\n  }\n\n  return byteArray;\n};\n\nexports.hexStr2byteArray = hexStr2byteArray; // @ts-ignore\n\nconst byte2hexStr = byte => {\n  const hexByteMap = '0123456789ABCDEF';\n  let str = '';\n  str += hexByteMap.charAt(byte >> 4);\n  str += hexByteMap.charAt(byte & 0x0f);\n  return str;\n};\n\nconst byteArray2hexStr = byteArray => {\n  let str = '';\n\n  for (let i = 0; i < byteArray.length; i++) str += byte2hexStr(byteArray[i]);\n\n  return str;\n};\n\nconst computeAddress = pubBytes => {\n  if (pubBytes.length === 65) pubBytes = pubBytes.slice(1);\n  const hash = js_sha3_1.keccak_256(pubBytes).toString();\n  const addressHex = '41' + hash.substring(24);\n  return exports.hexStr2byteArray(addressHex);\n};\n\nconst generatePubKey = bytes => {\n  const ec = new elliptic_1.ec('secp256k1');\n  const key = ec.keyFromPublic(bytes, 'bytes');\n  const pubkey = key.getPublic();\n  const x = pubkey.getX();\n  const y = pubkey.getY();\n  let xHex = x.toString('hex');\n\n  while (xHex.length < 64) {\n    xHex = '0' + xHex;\n  }\n\n  let yHex = y.toString('hex');\n\n  while (yHex.length < 64) {\n    yHex = '0' + yHex;\n  }\n\n  return '04' + xHex + yHex;\n};\n\nexports.generatePubKey = generatePubKey; // @ts-ignore\n\nconst generateAddress = publicKey => byteArray2hexStr(computeAddress(exports.hexStr2byteArray(exports.generatePubKey(publicKey))));\n\nexports.generateAddress = generateAddress;","map":{"version":3,"mappings":";;;;;;AAAA;;AACA;;AACA;;AAEA,MAAMA,YAAY,GAAIC,CAAD,IAAc;AAC/B,MAAIC,CAAC,GAAG,CAAR;AAEA,MAAID,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAArB,EACIC,CAAC,GAAGD,CAAC,CAACE,UAAF,CAAa,CAAb,IAAkB,IAAIA,UAAJ,CAAe,CAAf,CAAlB,GAAsC,EAA1C,CADJ,KAEK,IAAIF,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAArB,EACDC,CAAC,GAAGD,CAAC,CAACE,UAAF,CAAa,CAAb,IAAkB,IAAIA,UAAJ,CAAe,CAAf,CAAlB,GAAsC,EAA1C,CADC,KAEA,IAAIF,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAArB,EACDC,CAAC,GAAGD,CAAC,CAACE,UAAF,CAAa,CAAb,IAAkB,IAAIA,UAAJ,CAAe,CAAf,CAAtB;AAEJ,SAAOD,CAAP;AACH,CAXD;;AAaA,MAAME,SAAS,GAAIH,CAAD,IAAc;AAC5B,MAAKA,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAAlB,IACCA,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GADlB,IAECA,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,GAFtB,EAE4B;AACxB,WAAO,CAAP;AACH;;AAED,SAAO,CAAP;AACH,CARD;;AAUO,MAAMI,gBAAgB,GAAIC,GAAD,IAAgB;AAC5C,QAAMC,SAAS,GAAG,EAAlB;AACA,MAAIL,CAAC,GAAG,CAAR;AACA,MAAIM,CAAC,GAAG,CAAR;AACA,MAAIC,CAAC,GAAG,CAAR;;AAEA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,GAAG,CAACK,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACjC,UAAMT,CAAC,GAAGK,GAAG,CAACM,MAAJ,CAAWF,CAAX,CAAV;;AAEA,QAAIN,SAAS,CAACH,CAAD,CAAb,EAAkB;AACdC,OAAC,KAAK,CAAN;AACAA,OAAC,IAAIF,YAAY,CAACC,CAAD,CAAjB;AACAO,OAAC;;AAED,UAAI,MAAOA,CAAC,GAAG,CAAf,EAAmB;AACfD,iBAAS,CAACE,CAAC,EAAF,CAAT,GAAiBP,CAAjB;AACAA,SAAC,GAAG,CAAJ;AACH;AACJ;AACJ;;AAED,SAAOK,SAAP;AACH,CAtBM;;AAAMM,2BAAgBR,gBAAhB,C,CAwBb;;AACA,MAAMS,WAAW,GAAGC,IAAI,IAAG;AACvB,QAAMC,UAAU,GAAG,kBAAnB;AAEA,MAAIV,GAAG,GAAG,EAAV;AACAA,KAAG,IAAIU,UAAU,CAACJ,MAAX,CAAkBG,IAAI,IAAI,CAA1B,CAAP;AACAT,KAAG,IAAIU,UAAU,CAACJ,MAAX,CAAkBG,IAAI,GAAG,IAAzB,CAAP;AAEA,SAAOT,GAAP;AACH,CARD;;AAWA,MAAMW,gBAAgB,GAAIV,SAAD,IAA0B;AAC/C,MAAID,GAAG,GAAG,EAAV;;AAEA,OAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAIH,SAAS,CAACI,MAA/B,EAAwCD,CAAC,EAAzC,EACIJ,GAAG,IAAIQ,WAAW,CAACP,SAAS,CAACG,CAAD,CAAV,CAAlB;;AAEJ,SAAOJ,GAAP;AACH,CAPD;;AASA,MAAMY,cAAc,GAAIC,QAAD,IAAyB;AAC5C,MAAIA,QAAQ,CAACR,MAAT,KAAoB,EAAxB,EACIQ,QAAQ,GAAGA,QAAQ,CAACC,KAAT,CAAe,CAAf,CAAX;AAEJ,QAAMC,IAAI,GAAGC,qBAAWH,QAAX,EAAqBI,QAArB,EAAb;AACA,QAAMC,UAAU,GAAG,OAAOH,IAAI,CAACI,SAAL,CAAe,EAAf,CAA1B;AAEA,SAAOZ,yBAAiBW,UAAjB,CAAP;AACH,CARD;;AAUO,MAAME,cAAc,GAAIC,KAAD,IAAkB;AAC5C,QAAMC,EAAE,GAAG,IAAIC,aAAJ,CAAO,WAAP,CAAX;AACA,QAAMC,GAAG,GAAGF,EAAE,CAACG,aAAH,CAAiBJ,KAAjB,EAAwB,OAAxB,CAAZ;AACA,QAAMK,MAAM,GAAGF,GAAG,CAACG,SAAJ,EAAf;AACA,QAAMC,CAAC,GAAGF,MAAM,CAACG,IAAP,EAAV;AACA,QAAMC,CAAC,GAAGJ,MAAM,CAACK,IAAP,EAAV;AACA,MAAIC,IAAI,GAAGJ,CAAC,CAACX,QAAF,CAAW,KAAX,CAAX;;AACA,SAAOe,IAAI,CAAC3B,MAAL,GAAc,EAArB,EAAyB;AACrB2B,QAAI,GAAG,MAAMA,IAAb;AACH;;AACD,MAAIC,IAAI,GAAGH,CAAC,CAACb,QAAF,CAAW,KAAX,CAAX;;AACA,SAAOgB,IAAI,CAAC5B,MAAL,GAAc,EAArB,EAAyB;AACrB4B,QAAI,GAAG,MAAMA,IAAb;AACH;;AACD,SAAO,OAAOD,IAAP,GAAcC,IAArB;AACH,CAfM;;AAAM1B,yBAAca,cAAd,C,CAiBb;;AACO,MAAMc,eAAe,GAAIC,SAAD,IAAexB,gBAAgB,CAACC,cAAc,CAACL,yBAAiBA,uBAAe4B,SAAf,CAAjB,CAAD,CAAf,CAAvD;;AAAM5B,0BAAe2B,eAAf","names":["hexChar2byte","c","d","charCodeAt","isHexChar","hexStr2byteArray","str","byteArray","j","k","i","length","charAt","exports","byte2hexStr","byte","hexByteMap","byteArray2hexStr","computeAddress","pubBytes","slice","hash","js_sha3_1","toString","addressHex","substring","generatePubKey","bytes","ec","elliptic_1","key","keyFromPublic","pubkey","getPublic","x","getX","y","getY","xHex","yHex","generateAddress","publicKey"],"sourceRoot":"","sources":["../../../src/wallet/tron.crypto.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}