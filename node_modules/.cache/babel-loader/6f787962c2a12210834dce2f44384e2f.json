{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Egld = exports.createBalanceBuilder = void 0;\n\nconst bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\n\nconst _1 = require(\".\");\n\nconst errors_1 = require(\"./errors\");\n\nconst token_1 = require(\"./token\");\n\nclass BalanceBuilderImpl {\n  constructor(token) {\n    this.token = token;\n    this.nonce_ = null;\n\n    if (token.isFungible()) {\n      this.setNonce(0);\n    }\n  }\n\n  value(value) {\n    value = applyDenomination(value, this.token.decimals);\n    return new _1.Balance(this.token, this.getNonce(), value);\n  }\n\n  raw(value) {\n    return new _1.Balance(this.token, this.getNonce(), value);\n  }\n\n  nonce(nonce) {\n    let builder = createBalanceBuilder(this.token);\n    builder.setNonce(nonce);\n    return builder;\n  }\n\n  setNonce(nonce) {\n    this.nonce_ = new bignumber_js_1.default(nonce);\n  }\n\n  one() {\n    return this.value(1);\n  }\n\n  hasNonce() {\n    return this.token.isFungible() || this.nonce_ != null;\n  }\n\n  getNonce() {\n    if (this.nonce_ == null) {\n      throw new _1.ErrInvariantFailed(\"Nonce was not provided\");\n    }\n\n    return new bignumber_js_1.default(this.nonce_);\n  }\n\n  getToken() {\n    return this.token;\n  }\n\n  getTokenIdentifier() {\n    return this.getToken().getTokenIdentifier();\n  }\n\n}\n\nfunction createBalanceBuilder(token) {\n  let impl = new BalanceBuilderImpl(token);\n  let denominated = impl.value.bind(impl);\n  let others = {\n    value: impl.value.bind(impl),\n    raw: impl.raw.bind(impl),\n    nonce: impl.nonce.bind(impl),\n    setNonce: impl.setNonce.bind(impl),\n    one: impl.one.bind(impl),\n    hasNonce: impl.hasNonce.bind(impl),\n    getNonce: impl.getNonce.bind(impl),\n    getToken: impl.getToken.bind(impl),\n    getTokenIdentifier: impl.getTokenIdentifier.bind(impl)\n  };\n  return Object.assign(denominated, others);\n}\n\nexports.createBalanceBuilder = createBalanceBuilder;\n/**\n * Builder for an EGLD value.\n */\n\nexports.Egld = createBalanceBuilder(new token_1.Token({\n  identifier: \"EGLD\",\n  name: \"eGold\",\n  decimals: 18,\n  type: token_1.TokenType.Fungible\n}));\n\nfunction applyDenomination(value, decimals) {\n  if (decimals < 0) {\n    throw new errors_1.ErrInvalidArgument(\"The number of decimals must be positive\");\n  }\n\n  return new bignumber_js_1.default(value).shiftedBy(decimals).decimalPlaces(0);\n}","map":{"version":3,"mappings":"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","names":["BalanceBuilderImpl","constructor","token","nonce_","isFungible","setNonce","value","applyDenomination","decimals","_1","getNonce","raw","nonce","builder","createBalanceBuilder","bignumber_js_1","one","hasNonce","getToken","getTokenIdentifier","impl","denominated","bind","others","Object","assign","exports","token_1","identifier","name","type","Fungible","errors_1","shiftedBy","decimalPlaces"],"sourceRoot":"","sources":["../src/balanceBuilder.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}