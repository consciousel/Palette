{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.quality = void 0;\n\nvar types_1 = require(\"./types\");\n\nvar decimal_js_1 = require(\"decimal.js\");\n\nvar bigInt = require(\"big-integer\");\n\nvar buffer_1 = require(\"buffer/\");\n/**\n * class for encoding and decoding quality\n */\n\n\nvar quality =\n/** @class */\nfunction () {\n  function quality() {}\n  /**\n   * Encode quality amount\n   *\n   * @param arg string representation of an amount\n   * @returns Serialized quality\n   */\n\n\n  quality.encode = function (quality) {\n    var decimal = new decimal_js_1.Decimal(quality);\n    var exponent = decimal.e - 15;\n    var qualityString = decimal.times(\"1e\".concat(-exponent)).abs().toString();\n    var bytes = types_1.coreTypes.UInt64.from(bigInt(qualityString)).toBytes();\n    bytes[0] = exponent + 100;\n    return bytes;\n  };\n  /**\n   * Decode quality amount\n   *\n   * @param arg hex-string denoting serialized quality\n   * @returns deserialized quality\n   */\n\n\n  quality.decode = function (quality) {\n    var bytes = buffer_1.Buffer.from(quality, 'hex').slice(-8);\n    var exponent = bytes[0] - 100;\n    var mantissa = new decimal_js_1.Decimal(\"0x\".concat(bytes.slice(1).toString('hex')));\n    return mantissa.times(\"1e\".concat(exponent));\n  };\n\n  return quality;\n}();\n\nexports.quality = quality;","map":{"version":3,"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;AAEA;;;;;AAGA;AAAA;AAAA;AAAA,sBA4BC;AA3BC;;;;;;;;AAMOA,mBAAP,UAAcA,OAAd,EAA6B;AAC3B,QAAMC,OAAO,GAAG,IAAIC,oBAAJ,CAAYF,OAAZ,CAAhB;AACA,QAAMG,QAAQ,GAAGF,OAAO,CAACG,CAAR,GAAY,EAA7B;AACA,QAAMC,aAAa,GAAGJ,OAAO,CAACK,KAAR,CAAc,YAAK,CAACH,QAAN,CAAd,EAAgCI,GAAhC,GAAsCC,QAAtC,EAAtB;AACA,QAAMC,KAAK,GAAGC,kBAAUC,MAAV,CAAiBC,IAAjB,CAAsBC,MAAM,CAACR,aAAD,CAA5B,EAA6CS,OAA7C,EAAd;AACAL,SAAK,CAAC,CAAD,CAAL,GAAWN,QAAQ,GAAG,GAAtB;AACA,WAAOM,KAAP;AACD,GAPM;AASP;;;;;;;;AAMOT,mBAAP,UAAcA,OAAd,EAA6B;AAC3B,QAAMS,KAAK,GAAGM,gBAAOH,IAAP,CAAYZ,OAAZ,EAAqB,KAArB,EAA4BgB,KAA5B,CAAkC,CAAC,CAAnC,CAAd;AACA,QAAMb,QAAQ,GAAGM,KAAK,CAAC,CAAD,CAAL,GAAW,GAA5B;AACA,QAAMQ,QAAQ,GAAG,IAAIf,oBAAJ,CAAY,YAAKO,KAAK,CAACO,KAAN,CAAY,CAAZ,EAAeR,QAAf,CAAwB,KAAxB,CAAL,CAAZ,CAAjB;AACA,WAAOS,QAAQ,CAACX,KAAT,CAAe,YAAKH,QAAL,CAAf,CAAP;AACD,GALM;;AAMT;AAAC,CA5BD;;AA8BSe","names":["quality","decimal","decimal_js_1","exponent","e","qualityString","times","abs","toString","bytes","types_1","UInt64","from","bigInt","toBytes","buffer_1","slice","mantissa","exports"],"sourceRoot":"","sources":["../src/quality.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}