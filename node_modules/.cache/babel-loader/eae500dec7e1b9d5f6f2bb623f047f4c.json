{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Mnemonic = void 0;\n\nconst errors = __importStar(require(\"../errors\"));\n\nconst bip39_1 = require(\"bip39\");\n\nconst userKeys_1 = require(\"./userKeys\");\n\nconst ed25519_hd_key_1 = require(\"ed25519-hd-key\");\n\nconst MNEMONIC_STRENGTH = 256;\nconst BIP44_DERIVATION_PREFIX = \"m/44'/508'/0'/0'\";\n\nclass Mnemonic {\n  constructor(text) {\n    this.text = text;\n  }\n\n  static generate() {\n    let text = bip39_1.generateMnemonic(MNEMONIC_STRENGTH);\n    return new Mnemonic(text);\n  }\n\n  static fromString(text) {\n    text = text.trim();\n    Mnemonic.assertTextIsValid(text);\n    return new Mnemonic(text);\n  }\n\n  static assertTextIsValid(text) {\n    let isValid = bip39_1.validateMnemonic(text);\n\n    if (!isValid) {\n      throw new errors.ErrWrongMnemonic();\n    }\n  }\n\n  deriveKey() {\n    let addressIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let password = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    let seed = bip39_1.mnemonicToSeedSync(this.text, password);\n    let derivationPath = `${BIP44_DERIVATION_PREFIX}/${addressIndex}'`;\n    let derivationResult = ed25519_hd_key_1.derivePath(derivationPath, seed.toString(\"hex\"));\n    let key = derivationResult.key;\n    return new userKeys_1.UserSecretKey(key);\n  }\n\n  getWords() {\n    return this.text.split(\" \");\n  }\n\n  toString() {\n    return this.text;\n  }\n\n}\n\nexports.Mnemonic = Mnemonic;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,MAAMA,iBAAiB,GAAG,GAA1B;AACA,MAAMC,uBAAuB,GAAG,kBAAhC;;AAEA,MAAaC,QAAb,CAAqB;AAGjBC,cAAoBC,IAApB,EAAgC;AAC5B,SAAKA,IAAL,GAAYA,IAAZ;AACH;;AAEc,SAARC,QAAQ;AACX,QAAID,IAAI,GAAGE,yBAAiBN,iBAAjB,CAAX;AACA,WAAO,IAAIE,QAAJ,CAAaE,IAAb,CAAP;AACH;;AAEgB,SAAVG,UAAU,CAACH,IAAD,EAAa;AAC1BA,QAAI,GAAGA,IAAI,CAACI,IAAL,EAAP;AAEAN,YAAQ,CAACO,iBAAT,CAA2BL,IAA3B;AACA,WAAO,IAAIF,QAAJ,CAAaE,IAAb,CAAP;AACH;;AAE+B,SAAjBK,iBAAiB,CAACL,IAAD,EAAa;AACzC,QAAIM,OAAO,GAAGJ,yBAAiBF,IAAjB,CAAd;;AAEA,QAAI,CAACM,OAAL,EAAc;AACV,YAAM,IAAIC,MAAM,CAACC,gBAAX,EAAN;AACH;AACJ;;AAEDC,WAAS,GAAgD;AAAA,QAA/CC,YAA+C,uEAAxB,CAAwB;AAAA,QAArBC,QAAqB,uEAAF,EAAE;AACrD,QAAIC,IAAI,GAAGV,2BAAmB,KAAKF,IAAxB,EAA8BW,QAA9B,CAAX;AACA,QAAIE,cAAc,GAAG,GAAGhB,uBAAuB,IAAIa,YAAY,GAA/D;AACA,QAAII,gBAAgB,GAAGC,4BAAWF,cAAX,EAA2BD,IAAI,CAACI,QAAL,CAAc,KAAd,CAA3B,CAAvB;AACA,QAAIC,GAAG,GAAGH,gBAAgB,CAACG,GAA3B;AACA,WAAO,IAAIC,wBAAJ,CAAkBD,GAAlB,CAAP;AACH;;AAEDE,UAAQ;AACJ,WAAO,KAAKnB,IAAL,CAAUoB,KAAV,CAAgB,GAAhB,CAAP;AACH;;AAEDJ,UAAQ;AACJ,WAAO,KAAKhB,IAAZ;AACH;;AAzCgB;;AAArBqB","names":["MNEMONIC_STRENGTH","BIP44_DERIVATION_PREFIX","Mnemonic","constructor","text","generate","bip39_1","fromString","trim","assertTextIsValid","isValid","errors","ErrWrongMnemonic","deriveKey","addressIndex","password","seed","derivationPath","derivationResult","ed25519_hd_key_1","toString","key","userKeys_1","getWords","split","exports"],"sourceRoot":"","sources":["../../src/walletcore/mnemonic.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}