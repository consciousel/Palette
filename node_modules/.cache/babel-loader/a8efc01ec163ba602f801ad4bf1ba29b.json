{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CallBuilder = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar detect_node_1 = tslib_1.__importDefault(require(\"detect-node\"));\n\nvar urijs_1 = tslib_1.__importDefault(require(\"urijs\"));\n\nvar URITemplate_1 = tslib_1.__importDefault(require(\"urijs/src/URITemplate\"));\n\nvar errors_1 = require(\"./errors\");\n\nvar horizon_axios_client_1 = tslib_1.__importDefault(require(\"./horizon_axios_client\"));\n\nvar version = require(\"../package.json\").version;\n\nvar JOINABLE = [\"transaction\"];\nvar EventSource;\nvar anyGlobal = global;\n\nif (anyGlobal.EventSource) {\n  EventSource = anyGlobal.EventSource;\n} else if (detect_node_1.default) {\n  EventSource = require(\"eventsource\");\n} else {\n  EventSource = anyGlobal.window.EventSource;\n}\n\nvar CallBuilder = function () {\n  function CallBuilder(serverUrl) {\n    this.url = serverUrl.clone();\n    this.filter = [];\n    this.originalSegments = this.url.segment() || [];\n  }\n\n  CallBuilder.prototype.call = function () {\n    var _this = this;\n\n    this.checkFilter();\n    return this._sendNormalRequest(this.url).then(function (r) {\n      return _this._parseResponse(r);\n    });\n  };\n\n  CallBuilder.prototype.stream = function (options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.checkFilter();\n    this.url.setQuery(\"X-Client-Name\", \"js-stellar-sdk\");\n    this.url.setQuery(\"X-Client-Version\", version);\n    var es;\n    var timeout;\n\n    var createTimeout = function () {\n      timeout = setTimeout(function () {\n        if (es) {\n          es.close();\n        }\n\n        es = createEventSource();\n      }, options.reconnectTimeout || 15 * 1000);\n    };\n\n    var createEventSource = function () {\n      try {\n        es = new EventSource(_this.url.toString());\n      } catch (err) {\n        if (options.onerror) {\n          options.onerror(err);\n        }\n      }\n\n      createTimeout();\n\n      if (es) {\n        var closed_1 = false;\n\n        var onClose_1 = function () {\n          if (closed_1) {\n            return;\n          }\n\n          clearTimeout(timeout);\n          es.close();\n          createEventSource();\n          closed_1 = true;\n        };\n\n        var onMessage = function (message) {\n          if (message.type === \"close\") {\n            onClose_1();\n            return;\n          }\n\n          var result = message.data ? _this._parseRecord(JSON.parse(message.data)) : message;\n\n          if (result.paging_token) {\n            _this.url.setQuery(\"cursor\", result.paging_token);\n          }\n\n          clearTimeout(timeout);\n          createTimeout();\n\n          if (typeof options.onmessage !== \"undefined\") {\n            options.onmessage(result);\n          }\n        };\n\n        var onError = function (error) {\n          if (options.onerror) {\n            options.onerror(error);\n          }\n        };\n\n        if (es.addEventListener) {\n          es.addEventListener(\"message\", onMessage.bind(_this));\n          es.addEventListener(\"error\", onError.bind(_this));\n          es.addEventListener(\"close\", onClose_1.bind(_this));\n        } else {\n          es.onmessage = onMessage.bind(_this);\n          es.onerror = onError.bind(_this);\n        }\n      }\n\n      return es;\n    };\n\n    createEventSource();\n    return function close() {\n      clearTimeout(timeout);\n\n      if (es) {\n        es.close();\n      }\n    };\n  };\n\n  CallBuilder.prototype.cursor = function (cursor) {\n    this.url.setQuery(\"cursor\", cursor);\n    return this;\n  };\n\n  CallBuilder.prototype.limit = function (recordsNumber) {\n    this.url.setQuery(\"limit\", recordsNumber.toString());\n    return this;\n  };\n\n  CallBuilder.prototype.order = function (direction) {\n    this.url.setQuery(\"order\", direction);\n    return this;\n  };\n\n  CallBuilder.prototype.join = function (include) {\n    this.url.setQuery(\"join\", include);\n    return this;\n  };\n\n  CallBuilder.prototype.checkFilter = function () {\n    if (this.filter.length >= 2) {\n      throw new errors_1.BadRequestError(\"Too many filters specified\", this.filter);\n    }\n\n    if (this.filter.length === 1) {\n      var newSegment = this.originalSegments.concat(this.filter[0]);\n      this.url.segment(newSegment);\n    }\n  };\n\n  CallBuilder.prototype._requestFnForLink = function (link) {\n    var _this = this;\n\n    return function (opts) {\n      if (opts === void 0) {\n        opts = {};\n      }\n\n      return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var uri, template, r;\n        return tslib_1.__generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (link.templated) {\n                template = URITemplate_1.default(link.href);\n                uri = urijs_1.default(template.expand(opts));\n              } else {\n                uri = urijs_1.default(link.href);\n              }\n\n              return [4, this._sendNormalRequest(uri)];\n\n            case 1:\n              r = _a.sent();\n              return [2, this._parseResponse(r)];\n          }\n        });\n      });\n    };\n  };\n\n  CallBuilder.prototype._parseRecord = function (json) {\n    var _this = this;\n\n    if (!json._links) {\n      return json;\n    }\n\n    var _loop_1 = function (key) {\n      var n = json._links[key];\n      var included = false;\n\n      if (typeof json[key] !== \"undefined\") {\n        json[key + \"_attr\"] = json[key];\n        included = true;\n      }\n\n      if (included && JOINABLE.indexOf(key) >= 0) {\n        var record_1 = this_1._parseRecord(json[key]);\n\n        json[key] = function () {\n          return tslib_1.__awaiter(_this, void 0, void 0, function () {\n            return tslib_1.__generator(this, function (_a) {\n              return [2, record_1];\n            });\n          });\n        };\n      } else {\n        json[key] = this_1._requestFnForLink(n);\n      }\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, _a = Object.keys(json._links); _i < _a.length; _i++) {\n      var key = _a[_i];\n\n      _loop_1(key);\n    }\n\n    return json;\n  };\n\n  CallBuilder.prototype._sendNormalRequest = function (initialUrl) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n      var url;\n      return tslib_1.__generator(this, function (_a) {\n        url = initialUrl;\n\n        if (url.authority() === \"\") {\n          url = url.authority(this.url.authority());\n        }\n\n        if (url.protocol() === \"\") {\n          url = url.protocol(this.url.protocol());\n        }\n\n        return [2, horizon_axios_client_1.default.get(url.toString()).then(function (response) {\n          return response.data;\n        }).catch(this._handleNetworkError)];\n      });\n    });\n  };\n\n  CallBuilder.prototype._parseResponse = function (json) {\n    if (json._embedded && json._embedded.records) {\n      return this._toCollectionPage(json);\n    }\n\n    return this._parseRecord(json);\n  };\n\n  CallBuilder.prototype._toCollectionPage = function (json) {\n    var _this = this;\n\n    for (var i = 0; i < json._embedded.records.length; i += 1) {\n      json._embedded.records[i] = this._parseRecord(json._embedded.records[i]);\n    }\n\n    return {\n      records: json._embedded.records,\n      next: function () {\n        return tslib_1.__awaiter(_this, void 0, void 0, function () {\n          var r;\n          return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                return [4, this._sendNormalRequest(urijs_1.default(json._links.next.href))];\n\n              case 1:\n                r = _a.sent();\n                return [2, this._toCollectionPage(r)];\n            }\n          });\n        });\n      },\n      prev: function () {\n        return tslib_1.__awaiter(_this, void 0, void 0, function () {\n          var r;\n          return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                return [4, this._sendNormalRequest(urijs_1.default(json._links.prev.href))];\n\n              case 1:\n                r = _a.sent();\n                return [2, this._toCollectionPage(r)];\n            }\n          });\n        });\n      }\n    };\n  };\n\n  CallBuilder.prototype._handleNetworkError = function (error) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n      return tslib_1.__generator(this, function (_a) {\n        if (error.response && error.response.status && error.response.statusText) {\n          switch (error.response.status) {\n            case 404:\n              return [2, Promise.reject(new errors_1.NotFoundError(error.response.statusText, error.response.data))];\n\n            default:\n              return [2, Promise.reject(new errors_1.NetworkError(error.response.statusText, error.response.data))];\n          }\n        } else {\n          return [2, Promise.reject(new Error(error.message))];\n        }\n\n        return [2];\n      });\n    });\n  };\n\n  return CallBuilder;\n}();\n\nexports.CallBuilder = CallBuilder;","map":{"version":3,"mappings":"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","names":["version","require","JOINABLE","EventSource","anyGlobal","global","detect_node_1","window","serverUrl","url","clone","filter","originalSegments","segment","CallBuilder","checkFilter","_sendNormalRequest","then","r","_parseResponse","options","setQuery","es","timeout","createTimeout","setTimeout","close","createEventSource","reconnectTimeout","_this","toString","err","onerror","closed_1","onClose_1","clearTimeout","onMessage","message","type","result","data","_parseRecord","JSON","parse","paging_token","onmessage","onError","error","addEventListener","bind","cursor","recordsNumber","direction","include","length","errors_1","newSegment","concat","link","opts","templated","template","URITemplate_1","href","uri","urijs_1","expand","_a","json","_links","key","n","included","indexOf","record_1","this_1","_requestFnForLink","keys","_i","initialUrl","authority","protocol","horizon_axios_client_1","get","response","catch","_handleNetworkError","_embedded","records","_toCollectionPage","i","next","prev","status","statusText","Promise","reject","Error","exports"],"sourceRoot":"","sources":["../src/call_builder.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}