{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sendApproveFromCustodialWallet = exports.prepareApproveFromCustodialWallet = exports.sendBatchTransferFromCustodialWallet = exports.prepareBatchTransferFromCustodialWallet = exports.sendTransferFromCustodialWallet = exports.prepareTransferFromCustodialWallet = exports.sendCustodialWallet = exports.prepareCustodialWalletBatch = exports.generateCustodialWalletBatch = exports.prepareCustodialWallet = exports.generateCustodialWallet = exports.getCustodialAddresses = exports.obtainCustodialAddressType = void 0;\n\nconst bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\n\nconst blockchain_1 = require(\"../blockchain\");\n\nconst tatum_1 = require(\"../connector/tatum\");\n\nconst constants_1 = require(\"../constants\");\n\nconst custodial_1 = require(\"../contracts/custodial\");\n\nconst fungible_1 = require(\"../fungible\");\n\nconst helpers_1 = require(\"../helpers\");\n\nconst model_1 = require(\"../model\");\n\nconst transaction_1 = require(\"../transaction\");\n\nconst generateBatch = body => tatum_1.post('/v3/blockchain/sc/custodial/batch', body);\n\nconst obtainCustodialAddressType = body => {\n  if (body.chain === model_1.Currency.TRON && body.enableSemiFungibleTokens) {\n    throw new Error('MultiToken not supported for TRON.');\n  }\n\n  let abi;\n  let code;\n\n  if (body.enableFungibleTokens && body.enableNonFungibleTokens && body.enableSemiFungibleTokens && body.enableBatchTransactions) {\n    code = custodial_1.CustodialFullTokenWalletWithBatch.bytecode;\n    abi = custodial_1.CustodialFullTokenWalletWithBatch.abi;\n  } else if (body.enableFungibleTokens && body.enableNonFungibleTokens && body.enableSemiFungibleTokens && !body.enableBatchTransactions) {\n    code = custodial_1.CustodialFullTokenWallet.bytecode;\n    abi = custodial_1.CustodialFullTokenWallet.abi;\n  } else if (body.enableFungibleTokens && body.enableNonFungibleTokens && !body.enableSemiFungibleTokens && body.enableBatchTransactions) {\n    code = custodial_1.Custodial_20_721_TokenWalletWithBatch.bytecode;\n    abi = custodial_1.Custodial_20_721_TokenWalletWithBatch.abi;\n  } else if (body.enableFungibleTokens && body.enableNonFungibleTokens && !body.enableSemiFungibleTokens && !body.enableBatchTransactions) {\n    code = custodial_1.Custodial_20_721_TokenWallet.bytecode;\n    abi = custodial_1.Custodial_20_721_TokenWallet.abi;\n  } else if (body.enableFungibleTokens && !body.enableNonFungibleTokens && body.enableSemiFungibleTokens && body.enableBatchTransactions) {\n    code = custodial_1.Custodial_20_1155_TokenWalletWithBatch.bytecode;\n    abi = custodial_1.Custodial_20_1155_TokenWalletWithBatch.abi;\n  } else if (body.enableFungibleTokens && !body.enableNonFungibleTokens && body.enableSemiFungibleTokens && !body.enableBatchTransactions) {\n    code = custodial_1.Custodial_20_1155_TokenWallet.bytecode;\n    abi = custodial_1.Custodial_20_1155_TokenWallet.abi;\n  } else if (!body.enableFungibleTokens && body.enableNonFungibleTokens && body.enableSemiFungibleTokens && body.enableBatchTransactions) {\n    code = custodial_1.Custodial_721_1155_TokenWalletWithBatch.bytecode;\n    abi = custodial_1.Custodial_721_1155_TokenWalletWithBatch.abi;\n  } else if (!body.enableFungibleTokens && body.enableNonFungibleTokens && body.enableSemiFungibleTokens && !body.enableBatchTransactions) {\n    code = custodial_1.Custodial_721_1155_TokenWallet.bytecode;\n    abi = custodial_1.Custodial_721_1155_TokenWallet.abi;\n  } else if (body.enableFungibleTokens && !body.enableNonFungibleTokens && !body.enableSemiFungibleTokens && body.enableBatchTransactions) {\n    code = custodial_1.Custodial_20_TokenWalletWithBatch.bytecode;\n    abi = custodial_1.Custodial_20_TokenWalletWithBatch.abi;\n  } else if (body.enableFungibleTokens && !body.enableNonFungibleTokens && !body.enableSemiFungibleTokens && !body.enableBatchTransactions) {\n    code = custodial_1.Custodial_20_TokenWallet.bytecode;\n    abi = custodial_1.Custodial_20_TokenWallet.abi;\n  } else if (!body.enableFungibleTokens && body.enableNonFungibleTokens && !body.enableSemiFungibleTokens && body.enableBatchTransactions) {\n    code = custodial_1.Custodial_721_TokenWalletWithBatch.bytecode;\n    abi = custodial_1.Custodial_721_TokenWalletWithBatch.abi;\n  } else if (!body.enableFungibleTokens && body.enableNonFungibleTokens && !body.enableSemiFungibleTokens && !body.enableBatchTransactions) {\n    code = custodial_1.Custodial_721_TokenWallet.bytecode;\n    abi = custodial_1.Custodial_721_TokenWallet.abi;\n  } else if (!body.enableFungibleTokens && !body.enableNonFungibleTokens && body.enableSemiFungibleTokens && body.enableBatchTransactions) {\n    code = custodial_1.Custodial_1155_TokenWalletWithBatch.bytecode;\n    abi = custodial_1.Custodial_1155_TokenWalletWithBatch.abi;\n  } else if (!body.enableFungibleTokens && !body.enableNonFungibleTokens && body.enableSemiFungibleTokens && !body.enableBatchTransactions) {\n    code = custodial_1.Custodial_1155_TokenWallet.bytecode;\n    abi = custodial_1.Custodial_1155_TokenWallet.abi;\n  } else {\n    throw new Error('Unsupported combination of inputs.');\n  }\n\n  return {\n    abi,\n    code\n  };\n};\n\nexports.obtainCustodialAddressType = obtainCustodialAddressType;\n\nconst getCustodialFactoryContractAddress = (chain, testnet) => {\n  switch (chain) {\n    case model_1.Currency.CELO:\n      return testnet ? '0x481D6f967B120E094D3551DA2C4951242Be582af' : '0xC7f23843d5A51221df4B6D0778910b39b40134b4';\n\n    case model_1.Currency.TRON:\n      return testnet ? 'TRM8P5gpzAr85p2a5BMvqb9UfEdFEwEgA7' : 'TG59uLNQvCR45F6yKHPXipvCu7wg5D88Wr';\n\n    case model_1.Currency.ONE:\n      return testnet ? '0xb1462fE8E9Cf82c0296022Cca7bEfA3Fd4c12B34' : '0x86e27174edd52469f928f6206f3d8e4316525f00';\n\n    case model_1.Currency.XDC:\n      return testnet ? 'xdc6709Bdda623aF7EB152cB2fE2562aB7e031e564f' : 'xdc3485fdba44736859267789ac9c248cc4c1443956';\n\n    case model_1.Currency.ETH:\n      return testnet ? process.env.TESTNET_TYPE === 'ethereum-rinkeby' ? '0x4eC40a4A0dA042d46cC4529f918080957003b531' : '0x3485fdba44736859267789ac9c248cc4c1443956' : '0xd8050943c1E2764F750EC868ae1B375C4768d89A';\n\n    case model_1.Currency.MATIC:\n      return testnet ? '0x6792a82ffab4890cfbcee6c2c775ae9c898afe71' : '0xfc05d7fed6af03df8095cc93b674acac3f72756c';\n\n    case model_1.Currency.KLAY:\n      return testnet ? '0xd68c48173ccb0313442b23aed68b71961c618ade' : '0xb1462fE8E9Cf82c0296022Cca7bEfA3Fd4c12B34';\n\n    case model_1.Currency.BSC:\n      return testnet ? '0xeac818b4CC468Cf6556f772C4BB86e132E6ac0F3' : '0x9067f90c0975679158331fe43ad7a0a105424e0d';\n\n    default:\n      throw new Error('Unsupported chain.');\n  }\n};\n\nconst getCustodialAddresses = (chain, txId) => tatum_1.get(`/v3/blockchain/sc/custodial/${chain}/${txId}`);\n\nexports.getCustodialAddresses = getCustodialAddresses;\n/**\n * This method is @Deprecated. Use @link{generateCustodialWalletBatch} instead\n * Generate new smart contract based custodial wallet. This wallet is able to receive any type of assets, but transaction costs connected to the withdrawal\n * of assets is covered by the deployer.\n * @param testnet chain to work with\n * @param body request data\n * @param provider optional provider to enter. if not present, Tatum Web3 will be used.\n * @returns {txId: string} Transaction ID of the operation, or signatureID in case of Tatum KMS\n */\n\nconst generateCustodialWallet = async (testnet, body, provider) => {\n  console.log('This method is deprecated. For better gas consumption, use generateCustodialWalletBatch.');\n\n  switch (body.chain) {\n    case model_1.Currency.CELO:\n      return await transaction_1.sendCeloGenerateCustodialWalletSignedTransaction(testnet, body, provider);\n\n    case model_1.Currency.ONE:\n      return await transaction_1.sendOneGenerateCustodialWalletSignedTransaction(testnet, body, provider);\n\n    case model_1.Currency.ETH:\n      return await transaction_1.sendEthGenerateCustodialWalletSignedTransaction(body, provider);\n\n    case model_1.Currency.BSC:\n      return await transaction_1.sendBscGenerateCustodialWalletSignedTransaction(body, provider);\n\n    case model_1.Currency.MATIC:\n      return await transaction_1.sendPolygonGenerateCustodialWalletSignedTransaction(testnet, body, provider);\n\n    case model_1.Currency.TRON:\n      return await transaction_1.sendTronGenerateCustodialWalletSignedTransaction(testnet, body, provider);\n\n    default:\n      throw new Error('Unsupported chain');\n  }\n};\n\nexports.generateCustodialWallet = generateCustodialWallet;\n/**\n * This method is @Deprecated. Use @link{prepareCustodialWalletBatch} instead\n * Generate new smart contract based custodial wallet. This wallet is able to receive any type of assets, but transaction costs connected to the withdrawal\n * of assets is covered by the deployer.\n * @param testnet chain to work with\n * @param body request data\n * @param provider optional provider to enter. if not present, Tatum Web3 will be used.\n * @returns {txId: string} Transaction ID of the operation, or signatureID in case of Tatum KMS\n */\n\nconst prepareCustodialWallet = async (testnet, body, provider) => {\n  console.log('This method is deprecated. For better gas consumption, use prepareCustodialWalletBatch.');\n\n  switch (body.chain) {\n    case model_1.Currency.CELO:\n      return await transaction_1.prepareCeloGenerateCustodialWalletSignedTransaction(testnet, body, provider);\n\n    case model_1.Currency.ONE:\n      return await transaction_1.prepareOneGenerateCustodialWalletSignedTransaction(testnet, body, provider);\n\n    case model_1.Currency.ETH:\n      return await transaction_1.prepareEthGenerateCustodialWalletSignedTransaction(body, provider);\n\n    case model_1.Currency.BSC:\n      return await transaction_1.prepareBscGenerateCustodialWalletSignedTransaction(body, provider);\n\n    case model_1.Currency.MATIC:\n      return await transaction_1.preparePolygonGenerateCustodialWalletSignedTransaction(testnet, body, provider);\n\n    case model_1.Currency.TRON:\n      return await transaction_1.prepareTronGenerateCustodialWalletSignedTransaction(testnet, body, provider);\n\n    default:\n      throw new Error('Unsupported chain');\n  }\n};\n\nexports.prepareCustodialWallet = prepareCustodialWallet;\n/**\n * Generate new smart contract based custodial wallet. This wallet is able to receive any type of assets, but transaction costs connected to the withdrawal\n * of assets is covered by the deployer.\n * @param testnet chain to work with\n * @param body request data\n * @param provider optional provider to enter. if not present, Tatum Web3 will be used.\n * @returns {txId: string} Transaction ID of the operation, or signatureID in case of Tatum KMS\n */\n\nconst generateCustodialWalletBatch = async (testnet, body, provider) => {\n  const txData = await exports.prepareCustodialWalletBatch(testnet, body, provider);\n\n  if (body.feesCovered) {\n    return await generateBatch(body);\n  }\n\n  switch (body.chain) {\n    case model_1.Currency.CELO:\n      return await blockchain_1.celoBroadcast(txData, body.signatureId);\n\n    case model_1.Currency.TRON:\n      return await blockchain_1.tronBroadcast(txData, body.signatureId);\n\n    case model_1.Currency.ETH:\n      return await blockchain_1.ethBroadcast(txData, body.signatureId);\n\n    case model_1.Currency.MATIC:\n      return await blockchain_1.polygonBroadcast(txData, body.signatureId);\n\n    case model_1.Currency.ONE:\n      return await blockchain_1.oneBroadcast(txData, body.signatureId);\n\n    case model_1.Currency.XDC:\n      return await blockchain_1.xdcBroadcast(txData, body.signatureId);\n\n    case model_1.Currency.KLAY:\n      return await blockchain_1.klaytnBroadcast(txData, body.signatureId);\n\n    case model_1.Currency.BSC:\n      return await blockchain_1.bscBroadcast(txData, body.signatureId);\n\n    default:\n      throw new Error('Unsupported chain');\n  }\n};\n\nexports.generateCustodialWalletBatch = generateCustodialWalletBatch;\n/**\n * Generate new smart contract based custodial wallet. This wallet is able to receive any type of assets, but transaction costs connected to the withdrawal\n * of assets is covered by the deployer.\n * @param testnet chain to work with\n * @param body request data\n * @param provider optional provider to enter. if not present, Tatum Web3 will be used.\n * @returns {txId: string} Transaction ID of the operation, or signatureID in case of Tatum KMS\n */\n\nconst prepareCustodialWalletBatch = async (testnet, body, provider) => {\n  await tatum_1.validateBody(body, model_1.GenerateCustodialAddressBatch);\n  const params = body.chain === model_1.Currency.TRON ? [{\n    type: 'address',\n    value: transaction_1.convertAddressToHex(body.owner.trim())\n  }, {\n    type: 'uint256',\n    value: `0x${new bignumber_js_1.default(body.batchCount).toString(16)}`\n  }] : [body.chain === model_1.Currency.XDC ? transaction_1.fromXdcAddress(body.owner) : body.owner.trim(), `0x${new bignumber_js_1.default(body.batchCount).toString(16)}`];\n  const methodName = body.chain === model_1.Currency.TRON ? 'cloneNewWallet(address,uint256)' : 'cloneNewWallet';\n  return await helpers_1.helperPrepareSCCall(testnet, Object.assign(Object.assign({}, body), {\n    contractAddress: getCustodialFactoryContractAddress(body.chain, testnet)\n  }), model_1.GenerateCustodialAddressBatch, methodName, params, body.chain === model_1.Currency.TRON ? methodName : undefined, provider, [constants_1.CUSTODIAL_PROXY_ABI]);\n};\n\nexports.prepareCustodialWalletBatch = prepareCustodialWalletBatch;\n/**\n * @Deprecated, use generateCustodialWalletBatch\n * Generate new smart contract based custodial wallet. This wallet is able to receive any type of assets, but transaction costs connected to the withdrawal\n * of assets is covered by the deployer.\n * @param testnet chain to work with\n * @param body request data\n * @param provider optional provider to enter. if not present, Tatum Web3 will be used.\n * @returns {txId: string} Transaction ID of the operation, or signatureID in case of Tatum KMS\n */\n\nconst sendCustodialWallet = async (testnet, body, provider) => {\n  let txData;\n\n  switch (body.chain) {\n    case model_1.Currency.CELO:\n      txData = await transaction_1.prepareCeloGenerateCustodialWalletSignedTransaction(testnet, body, provider);\n      break;\n\n    case model_1.Currency.ONE:\n      txData = await transaction_1.prepareOneGenerateCustodialWalletSignedTransaction(testnet, body, provider);\n      break;\n\n    case model_1.Currency.ETH:\n      txData = await transaction_1.prepareEthGenerateCustodialWalletSignedTransaction(body, provider);\n      break;\n\n    case model_1.Currency.BSC:\n      txData = await transaction_1.prepareBscGenerateCustodialWalletSignedTransaction(body, provider);\n      break;\n\n    case model_1.Currency.MATIC:\n      txData = await transaction_1.preparePolygonGenerateCustodialWalletSignedTransaction(testnet, body, provider);\n      break;\n\n    case model_1.Currency.KLAY:\n      txData = await transaction_1.prepareKlaytnGenerateCustodialWalletSignedTransaction(testnet, body, provider);\n      break;\n\n    case model_1.Currency.TRON:\n      txData = await transaction_1.prepareTronGenerateCustodialWalletSignedTransaction(testnet, body, provider);\n      break;\n\n    default:\n      throw new Error('Unsupported chain');\n  }\n\n  return helpers_1.helperBroadcastTx(body.chain, txData, body.signatureId);\n};\n\nexports.sendCustodialWallet = sendCustodialWallet;\n/**\n * Prepare signed transaction from the custodial SC wallet.\n * @param testnet chain to work with\n * @param body request data\n * @param provider optional provider to enter. if not present, Tatum Web3 will be used.\n * @returns {txId: string} Transaction ID of the operation, or signatureID in case of Tatum KMS\n */\n\nconst prepareTransferFromCustodialWallet = async (testnet, body, provider) => {\n  let r;\n  let decimals;\n\n  if (body.chain === model_1.Currency.TRON) {\n    decimals = 6;\n    await tatum_1.validateBody(body, model_1.TransferFromTronCustodialAddress);\n  } else {\n    decimals = 18;\n    await tatum_1.validateBody(body, model_1.TransferFromCustodialAddress);\n  }\n\n  if (body.chain === model_1.Currency.CELO) {\n    r = new model_1.CeloSmartContractMethodInvocation();\n  } else {\n    r = new model_1.SmartContractMethodInvocation();\n  }\n\n  r.fee = body.fee;\n  r.nonce = body.nonce;\n  r.fromPrivateKey = body.fromPrivateKey;\n  r.signatureId = body.signatureId;\n  r.index = body.index;\n  r.contractAddress = body.custodialAddress;\n  r.methodName = 'transfer';\n  let amount = new bignumber_js_1.default(body.amount || 0);\n  let tokenId = new bignumber_js_1.default(body.tokenId || 0);\n\n  if (body.contractType === model_1.ContractType.NATIVE_ASSET) {\n    amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(decimals));\n  } else if (body.contractType === model_1.ContractType.FUNGIBLE_TOKEN) {\n    tokenId = new bignumber_js_1.default(0);\n\n    switch (body.chain) {\n      case model_1.Currency.CELO:\n        amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await transaction_1.getCeloErc20ContractDecimals(testnet, body.tokenAddress, provider)));\n        break;\n\n      case model_1.Currency.ONE:\n        amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await transaction_1.getOne20ContractDecimals(testnet, body.tokenAddress, provider)));\n        break;\n\n      case model_1.Currency.XDC:\n        amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await fungible_1.getErc20Decimals(testnet, model_1.Currency.XDC, body.tokenAddress, provider)));\n        break;\n\n      case model_1.Currency.ETH:\n        amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await transaction_1.getEthErc20ContractDecimals(testnet, body.tokenAddress, provider)));\n        break;\n\n      case model_1.Currency.BSC:\n        amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await transaction_1.getBscBep20ContractDecimals(testnet, body.tokenAddress, provider)));\n        break;\n\n      case model_1.Currency.MATIC:\n        amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await transaction_1.getPolygonErc20ContractDecimals(testnet, body.tokenAddress, provider)));\n        break;\n\n      case model_1.Currency.KLAY:\n        amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await transaction_1.getKlayErc20ContractDecimals(testnet, body.tokenAddress, provider)));\n        break;\n\n      case model_1.Currency.TRON:\n        amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await transaction_1.getTronTrc20ContractDecimals(testnet, body.tokenAddress, provider)));\n        break;\n\n      default:\n        throw new Error('Unsupported combination of inputs.');\n    }\n  }\n\n  r.params = [body.tokenAddress || '0x000000000000000000000000000000000000dEaD', body.contractType, body.recipient, `0x${amount.toString(16)}`, `0x${new bignumber_js_1.default(tokenId).toString(16)}`];\n  r.methodABI = custodial_1.CustodialFullTokenWallet.abi.find(a => a.name === 'transfer');\n\n  switch (body.chain) {\n    case model_1.Currency.CELO:\n      return await transaction_1.prepareCeloSmartContractWriteMethodInvocation(testnet, Object.assign(Object.assign({}, r), {\n        feeCurrency: body.feeCurrency || model_1.Currency.CELO\n      }), provider);\n\n    case model_1.Currency.ONE:\n      return await transaction_1.prepareOneSmartContractWriteMethodInvocation(testnet, r, provider);\n\n    case model_1.Currency.XDC:\n      return await transaction_1.prepareXdcSmartContractWriteMethodInvocation(r, provider);\n\n    case model_1.Currency.ETH:\n      return await transaction_1.prepareSmartContractWriteMethodInvocation(r, provider);\n\n    case model_1.Currency.BSC:\n      return await transaction_1.prepareBscSmartContractWriteMethodInvocation(r, provider);\n\n    case model_1.Currency.MATIC:\n      return await transaction_1.preparePolygonSmartContractWriteMethodInvocation(testnet, r, provider);\n\n    case model_1.Currency.KLAY:\n      return await transaction_1.prepareKlaytnSmartContractWriteMethodInvocation(testnet, r, provider);\n\n    case model_1.Currency.TRON:\n      {\n        const {\n          feeLimit,\n          from\n        } = body;\n        r.methodName = 'transfer(address,uint256,address,uint256,uint256)';\n        r.params = [{\n          type: 'address',\n          value: transaction_1.convertAddressToHex(r.params[0])\n        }, {\n          type: 'uint256',\n          value: r.params[1]\n        }, {\n          type: 'address',\n          value: transaction_1.convertAddressToHex(r.params[2])\n        }, {\n          type: 'uint256',\n          value: r.params[3]\n        }, {\n          type: 'uint256',\n          value: r.params[4]\n        }];\n        return await transaction_1.prepareTronSmartContractInvocation(testnet, r, feeLimit, from, provider);\n      }\n\n    default:\n      throw new Error('Unsupported combination of inputs.');\n  }\n};\n\nexports.prepareTransferFromCustodialWallet = prepareTransferFromCustodialWallet;\n/**\n * Send signed transaction from the custodial SC wallet.\n * @param testnet chain to work with\n * @param body request data\n * @param provider optional provider to enter. if not present, Tatum Web3 will be used.\n * @returns {txId: string} Transaction ID of the operation, or signatureID in case of Tatum KMS\n */\n\nconst sendTransferFromCustodialWallet = async (testnet, body, provider) => helpers_1.helperBroadcastTx(body.chain, await exports.prepareTransferFromCustodialWallet(testnet, body, provider), body.signatureId);\n\nexports.sendTransferFromCustodialWallet = sendTransferFromCustodialWallet;\n/**\n * Prepare signed batch transaction from the custodial SC wallet.\n * @param testnet chain to work with\n * @param body request data\n * @param provider optional provider to enter. if not present, Tatum Web3 will be used.\n * @returns {txId: string} Transaction ID of the operation, or signatureID in case of Tatum KMS\n */\n\nconst prepareBatchTransferFromCustodialWallet = async (testnet, body, provider) => {\n  let r;\n  let decimals;\n\n  if (body.chain === model_1.Currency.TRON) {\n    await tatum_1.validateBody(body, model_1.TransferFromTronCustodialAddressBatch);\n    decimals = 6;\n  } else {\n    await tatum_1.validateBody(body, model_1.TransferFromCustodialAddressBatch);\n    decimals = 18;\n  }\n\n  if (body.chain === model_1.Currency.CELO) {\n    r = new model_1.CeloSmartContractMethodInvocation();\n  } else {\n    r = new model_1.SmartContractMethodInvocation();\n  }\n\n  r.fee = body.fee;\n  r.nonce = body.nonce;\n  r.fromPrivateKey = body.fromPrivateKey;\n  r.signatureId = body.signatureId;\n  r.index = body.index;\n  r.contractAddress = body.custodialAddress;\n  r.methodName = 'transferBatch';\n  const amounts = [];\n  const tokenIds = [];\n\n  for (let i = 0; i < body.contractType.length; i++) {\n    let amount = new bignumber_js_1.default(body.amount ? body.amount[i] : 0);\n    let tokenId = new bignumber_js_1.default(body.tokenId ? body.tokenId[i] : 0);\n\n    if (body.contractType[i] === model_1.ContractType.NATIVE_ASSET) {\n      amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(decimals));\n    } else if (body.contractType[i] === model_1.ContractType.NON_FUNGIBLE_TOKEN) {\n      amount = new bignumber_js_1.default(0);\n    } else if (body.contractType[i] === model_1.ContractType.FUNGIBLE_TOKEN && body.tokenAddress) {\n      tokenId = new bignumber_js_1.default(0);\n\n      switch (body.chain) {\n        case model_1.Currency.CELO:\n          amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await transaction_1.getCeloErc20ContractDecimals(testnet, body.tokenAddress[i], provider)));\n          break;\n\n        case model_1.Currency.ONE:\n          amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await transaction_1.getOne20ContractDecimals(testnet, body.tokenAddress[i], provider)));\n          break;\n\n        case model_1.Currency.XDC:\n          amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await fungible_1.getErc20Decimals(testnet, model_1.Currency.XDC, body.tokenAddress[i], provider)));\n          break;\n\n        case model_1.Currency.ETH:\n          amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await transaction_1.getEthErc20ContractDecimals(testnet, body.tokenAddress[i], provider)));\n          break;\n\n        case model_1.Currency.BSC:\n          amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await transaction_1.getBscBep20ContractDecimals(testnet, body.tokenAddress[i], provider)));\n          break;\n\n        case model_1.Currency.MATIC:\n          amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await transaction_1.getPolygonErc20ContractDecimals(testnet, body.tokenAddress[i], provider)));\n          break;\n\n        case model_1.Currency.KLAY:\n          amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await transaction_1.getKlayErc20ContractDecimals(testnet, body.tokenAddress[i], provider)));\n          break;\n\n        case model_1.Currency.TRON:\n          amount = amount.multipliedBy(new bignumber_js_1.default(10).pow(await transaction_1.getTronTrc20ContractDecimals(testnet, body.tokenAddress[i], provider)));\n          break;\n\n        default:\n          throw new Error('Unsupported combination of inputs.');\n      }\n    }\n\n    amounts.push(`0x${amount.toString(16)}`);\n    tokenIds.push(`0x${tokenId.toString(16)}`);\n  }\n\n  r.params = [(body.tokenAddress || []).map(t => t === '0' ? '0x000000000000000000000000000000000000dEaD' : t), body.contractType, body.recipient, amounts, tokenIds];\n  r.methodABI = custodial_1.CustodialFullTokenWalletWithBatch.abi.find(a => a.name === 'transferBatch');\n\n  switch (body.chain) {\n    case model_1.Currency.CELO:\n      return await transaction_1.prepareCeloSmartContractWriteMethodInvocation(testnet, Object.assign(Object.assign({}, r), {\n        feeCurrency: body.feeCurrency || model_1.Currency.CELO\n      }), provider);\n\n    case model_1.Currency.ONE:\n      return await transaction_1.prepareOneSmartContractWriteMethodInvocation(testnet, r, provider);\n\n    case model_1.Currency.XDC:\n      return await transaction_1.prepareXdcSmartContractWriteMethodInvocation(r, provider);\n\n    case model_1.Currency.ETH:\n      return await transaction_1.prepareSmartContractWriteMethodInvocation(r, provider);\n\n    case model_1.Currency.BSC:\n      return await transaction_1.prepareBscSmartContractWriteMethodInvocation(r, provider);\n\n    case model_1.Currency.MATIC:\n      return await transaction_1.preparePolygonSmartContractWriteMethodInvocation(testnet, r, provider);\n\n    case model_1.Currency.KLAY:\n      return await transaction_1.prepareKlaytnSmartContractWriteMethodInvocation(testnet, r, provider);\n\n    case model_1.Currency.TRON:\n      {\n        const body1 = body;\n        return await transaction_1.prepareTronCustodialTransferBatch(testnet, r, body1.feeLimit, body1.from, provider);\n      }\n\n    default:\n      throw new Error('Unsupported combination of inputs.');\n  }\n};\n\nexports.prepareBatchTransferFromCustodialWallet = prepareBatchTransferFromCustodialWallet;\n/**\n * Send signed batch transaction from the custodial SC wallet.\n * @param testnet chain to work with\n * @param body request data\n * @param provider optional provider to enter. if not present, Tatum Web3 will be used.\n * @returns {txId: string} Transaction ID of the operation, or signatureID in case of Tatum KMS\n */\n\nconst sendBatchTransferFromCustodialWallet = async (testnet, body, provider) => helpers_1.helperBroadcastTx(body.chain, await exports.prepareBatchTransferFromCustodialWallet(testnet, body, provider), body.signatureId);\n\nexports.sendBatchTransferFromCustodialWallet = sendBatchTransferFromCustodialWallet;\n/**\n * Prepare signed approve transaction from the custodial SC wallet.\n * @param testnet chain to work with\n * @param body request data\n * @param provider optional provider to enter. if not present, Tatum Web3 will be used.\n * @returns {txId: string} Transaction ID of the operation, or signatureID in case of Tatum KMS\n */\n\nconst prepareApproveFromCustodialWallet = async (testnet, body, provider) => {\n  await tatum_1.validateBody(body, model_1.ApproveCustodialTransfer);\n  const decimals = body.contractType === model_1.ContractType.FUNGIBLE_TOKEN ? await fungible_1.getErc20Decimals(testnet, body.chain, body.tokenAddress, provider) : 0;\n  const params = [body.tokenAddress.trim(), body.contractType, body.spender, `0x${new bignumber_js_1.default(body.amount || 0).multipliedBy(new bignumber_js_1.default(10).pow(decimals)).toString(16)}`, `0x${new bignumber_js_1.default(body.tokenId || 0).toString(16)}`];\n  delete body.amount;\n  return await helpers_1.helperPrepareSCCall(testnet, Object.assign(Object.assign({}, body), {\n    contractAddress: body.custodialAddress\n  }), model_1.ApproveCustodialTransfer, 'approve', params, undefined, provider, custodial_1.CustodialFullTokenWallet.abi);\n};\n\nexports.prepareApproveFromCustodialWallet = prepareApproveFromCustodialWallet;\n/**\n * Send signed approve transaction from the custodial SC wallet.\n * @param testnet chain to work with\n * @param body request data\n * @param provider optional provider to enter. if not present, Tatum Web3 will be used.\n * @returns {txId: string} Transaction ID of the operation, or signatureID in case of Tatum KMS\n */\n\nconst sendApproveFromCustodialWallet = async (testnet, body, provider) => helpers_1.helperBroadcastTx(body.chain, await exports.prepareApproveFromCustodialWallet(testnet, body, provider), body.signatureId);\n\nexports.sendApproveFromCustodialWallet = sendApproveFromCustodialWallet;","map":{"version":3,"mappings":"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","names":["generateBatch","body","tatum_1","obtainCustodialAddressType","chain","model_1","TRON","enableSemiFungibleTokens","Error","abi","code","enableFungibleTokens","enableNonFungibleTokens","enableBatchTransactions","custodial_1","bytecode","exports","getCustodialFactoryContractAddress","testnet","CELO","ONE","XDC","ETH","process","env","TESTNET_TYPE","MATIC","KLAY","BSC","getCustodialAddresses","txId","generateCustodialWallet","provider","console","log","transaction_1","prepareCustodialWallet","generateCustodialWalletBatch","txData","feesCovered","blockchain_1","signatureId","prepareCustodialWalletBatch","params","type","value","owner","trim","bignumber_js_1","batchCount","toString","methodName","helpers_1","Object","contractAddress","undefined","constants_1","sendCustodialWallet","prepareTransferFromCustodialWallet","r","decimals","fee","nonce","fromPrivateKey","index","custodialAddress","amount","tokenId","contractType","NATIVE_ASSET","multipliedBy","pow","FUNGIBLE_TOKEN","tokenAddress","fungible_1","recipient","methodABI","find","a","name","feeCurrency","feeLimit","from","sendTransferFromCustodialWallet","prepareBatchTransferFromCustodialWallet","amounts","tokenIds","i","length","NON_FUNGIBLE_TOKEN","push","map","t","body1","sendBatchTransferFromCustodialWallet","prepareApproveFromCustodialWallet","spender","sendApproveFromCustodialWallet"],"sourceRoot":"","sources":["../../../src/wallet/custodial.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}