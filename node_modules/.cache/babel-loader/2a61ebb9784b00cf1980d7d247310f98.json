{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Operation = exports.AuthClawbackEnabledFlag = exports.AuthImmutableFlag = exports.AuthRevocableFlag = exports.AuthRequiredFlag = undefined;\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n/* eslint-disable no-bitwise */\n\n\nvar _jsXdr = require('js-xdr');\n\nvar _bignumber = require('bignumber.js');\n\nvar _bignumber2 = _interopRequireDefault(_bignumber);\n\nvar _trimEnd = require('lodash/trimEnd');\n\nvar _trimEnd2 = _interopRequireDefault(_trimEnd);\n\nvar _isUndefined = require('lodash/isUndefined');\n\nvar _isUndefined2 = _interopRequireDefault(_isUndefined);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isNumber = require('lodash/isNumber');\n\nvar _isNumber2 = _interopRequireDefault(_isNumber);\n\nvar _isFinite = require('lodash/isFinite');\n\nvar _isFinite2 = _interopRequireDefault(_isFinite);\n\nvar _continued_fraction = require('./util/continued_fraction');\n\nvar _asset = require('./asset');\n\nvar _liquidity_pool_asset = require('./liquidity_pool_asset');\n\nvar _claimant = require('./claimant');\n\nvar _strkey = require('./strkey');\n\nvar _liquidity_pool_id = require('./liquidity_pool_id');\n\nvar _stellarXdr_generated = require('./generated/stellar-xdr_generated');\n\nvar _stellarXdr_generated2 = _interopRequireDefault(_stellarXdr_generated);\n\nvar _index = require('./operations/index');\n\nvar ops = _interopRequireWildcard(_index);\n\nvar _decode_encode_muxed_account = require('./util/decode_encode_muxed_account');\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar ONE = 10000000;\nvar MAX_INT64 = '9223372036854775807';\n/**\n * When set using `{@link Operation.setOptions}` option, requires the issuing\n * account to give other accounts permission before they can hold the issuing\n * accountâ€™s credit.\n *\n * @constant\n * @see [Account flags](https://developers.stellar.org/docs/glossary/accounts/#flags)\n */\n\nvar AuthRequiredFlag = exports.AuthRequiredFlag = 1 << 0;\n/**\n * When set using `{@link Operation.setOptions}` option, allows the issuing\n * account to revoke its credit held by other accounts.\n *\n * @constant\n * @see [Account flags](https://developers.stellar.org/docs/glossary/accounts/#flags)\n */\n\nvar AuthRevocableFlag = exports.AuthRevocableFlag = 1 << 1;\n/**\n * When set using `{@link Operation.setOptions}` option, then none of the\n * authorization flags can be set and the account can never be deleted.\n *\n * @constant\n * @see [Account flags](https://developers.stellar.org/docs/glossary/accounts/#flags)\n */\n\nvar AuthImmutableFlag = exports.AuthImmutableFlag = 1 << 2;\n/**\n * When set using `{@link Operation.setOptions}` option, then any trustlines\n * created by this account can have a ClawbackOp operation submitted for the\n * corresponding asset.\n *\n * @constant\n * @see [Account flags](https://developers.stellar.org/docs/glossary/accounts/#flags)\n */\n\nvar AuthClawbackEnabledFlag = exports.AuthClawbackEnabledFlag = 1 << 3;\n/**\n * `Operation` class represents [operations](https://developers.stellar.org/docs/glossary/operations/) in Stellar network.\n * Use one of static methods to create operations:\n * * `{@link Operation.createAccount}`\n * * `{@link Operation.payment}`\n * * `{@link Operation.pathPaymentStrictReceive}`\n * * `{@link Operation.pathPaymentStrictSend}`\n * * `{@link Operation.manageSellOffer}`\n * * `{@link Operation.manageBuyOffer}`\n * * `{@link Operation.createPassiveSellOffer}`\n * * `{@link Operation.setOptions}`\n * * `{@link Operation.changeTrust}`\n * * `{@link Operation.allowTrust}`\n * * `{@link Operation.accountMerge}`\n * * `{@link Operation.inflation}`\n * * `{@link Operation.manageData}`\n * * `{@link Operation.bumpSequence}`\n * * `{@link Operation.createClaimableBalance}`\n * * `{@link Operation.claimClaimableBalance}`\n * * `{@link Operation.beginSponsoringFutureReserves}`\n * * `{@link Operation.endSponsoringFutureReserves}`\n * * `{@link Operation.revokeAccountSponsorship}`\n * * `{@link Operation.revokeTrustlineSponsorship}`\n * * `{@link Operation.revokeOfferSponsorship}`\n * * `{@link Operation.revokeDataSponsorship}`\n * * `{@link Operation.revokeClaimableBalanceSponsorship}`\n * * `{@link Operation.revokeLiquidityPoolSponsorship}`\n * * `{@link Operation.revokeSignerSponsorship}`\n * * `{@link Operation.clawback}`\n * * `{@link Operation.clawbackClaimableBalance}`\n * * `{@link Operation.setTrustLineFlags}`\n * * `{@link Operation.liquidityPoolDeposit}`\n * * `{@link Operation.liquidityPoolWithdraw}`\n *\n * @class Operation\n */\n\nvar Operation = exports.Operation = function () {\n  function Operation() {\n    _classCallCheck(this, Operation);\n  }\n\n  _createClass(Operation, null, [{\n    key: 'setSourceAccount',\n    value: function setSourceAccount(opAttributes, opts) {\n      if (opts.source) {\n        try {\n          opAttributes.sourceAccount = (0, _decode_encode_muxed_account.decodeAddressToMuxedAccount)(opts.source, opts.withMuxing);\n        } catch (e) {\n          throw new Error('Source address is invalid');\n        }\n      }\n    }\n    /**\n     * Deconstructs the raw XDR operation object into the structured object that\n     * was used to create the operation (i.e. the `opts` parameter to most ops).\n     *\n     * @param {xdr.Operation}   operation - An XDR Operation.\n     * @param {boolean}         [withMuxing] - Indicates that if the operation\n     *     contains M... addresses, they should be interpreted fully as muxed\n     *     accounts. By default, this option is disabled until muxed accounts are\n     *     mature.\n     *\n     * @return {Operation}\n     */\n\n  }, {\n    key: 'fromXDRObject',\n    value: function fromXDRObject(operation, withMuxing) {\n      var result = {};\n\n      if (operation.sourceAccount()) {\n        result.source = (0, _decode_encode_muxed_account.encodeMuxedAccountToAddress)(operation.sourceAccount(), withMuxing);\n      }\n\n      var attrs = operation.body().value();\n      var operationName = operation.body().switch().name;\n\n      switch (operationName) {\n        case 'createAccount':\n          {\n            result.type = 'createAccount';\n            result.destination = accountIdtoAddress(attrs.destination());\n            result.startingBalance = this._fromXDRAmount(attrs.startingBalance());\n            break;\n          }\n\n        case 'payment':\n          {\n            result.type = 'payment';\n            result.destination = (0, _decode_encode_muxed_account.encodeMuxedAccountToAddress)(attrs.destination(), withMuxing);\n            result.asset = _asset.Asset.fromOperation(attrs.asset());\n            result.amount = this._fromXDRAmount(attrs.amount());\n            break;\n          }\n\n        case 'pathPaymentStrictReceive':\n          {\n            result.type = 'pathPaymentStrictReceive';\n            result.sendAsset = _asset.Asset.fromOperation(attrs.sendAsset());\n            result.sendMax = this._fromXDRAmount(attrs.sendMax());\n            result.destination = (0, _decode_encode_muxed_account.encodeMuxedAccountToAddress)(attrs.destination(), withMuxing);\n            result.destAsset = _asset.Asset.fromOperation(attrs.destAsset());\n            result.destAmount = this._fromXDRAmount(attrs.destAmount());\n            result.path = [];\n            var path = attrs.path(); // note that Object.values isn't supported by node 6!\n\n            Object.keys(path).forEach(function (pathKey) {\n              result.path.push(_asset.Asset.fromOperation(path[pathKey]));\n            });\n            break;\n          }\n\n        case 'pathPaymentStrictSend':\n          {\n            result.type = 'pathPaymentStrictSend';\n            result.sendAsset = _asset.Asset.fromOperation(attrs.sendAsset());\n            result.sendAmount = this._fromXDRAmount(attrs.sendAmount());\n            result.destination = (0, _decode_encode_muxed_account.encodeMuxedAccountToAddress)(attrs.destination(), withMuxing);\n            result.destAsset = _asset.Asset.fromOperation(attrs.destAsset());\n            result.destMin = this._fromXDRAmount(attrs.destMin());\n            result.path = [];\n\n            var _path = attrs.path(); // note that Object.values isn't supported by node 6!\n\n\n            Object.keys(_path).forEach(function (pathKey) {\n              result.path.push(_asset.Asset.fromOperation(_path[pathKey]));\n            });\n            break;\n          }\n\n        case 'changeTrust':\n          {\n            result.type = 'changeTrust';\n\n            switch (attrs.line().switch()) {\n              case _stellarXdr_generated2.default.AssetType.assetTypePoolShare():\n                result.line = _liquidity_pool_asset.LiquidityPoolAsset.fromOperation(attrs.line());\n                break;\n\n              default:\n                result.line = _asset.Asset.fromOperation(attrs.line());\n                break;\n            }\n\n            result.limit = this._fromXDRAmount(attrs.limit());\n            break;\n          }\n\n        case 'allowTrust':\n          {\n            result.type = 'allowTrust';\n            result.trustor = accountIdtoAddress(attrs.trustor());\n            result.assetCode = attrs.asset().value().toString();\n            result.assetCode = (0, _trimEnd2.default)(result.assetCode, '\\0');\n            result.authorize = attrs.authorize();\n            break;\n          }\n\n        case 'setOptions':\n          {\n            result.type = 'setOptions';\n\n            if (attrs.inflationDest()) {\n              result.inflationDest = accountIdtoAddress(attrs.inflationDest());\n            }\n\n            result.clearFlags = attrs.clearFlags();\n            result.setFlags = attrs.setFlags();\n            result.masterWeight = attrs.masterWeight();\n            result.lowThreshold = attrs.lowThreshold();\n            result.medThreshold = attrs.medThreshold();\n            result.highThreshold = attrs.highThreshold(); // home_domain is checked by iscntrl in stellar-core\n\n            result.homeDomain = attrs.homeDomain() !== undefined ? attrs.homeDomain().toString('ascii') : undefined;\n\n            if (attrs.signer()) {\n              var signer = {};\n              var arm = attrs.signer().key().arm();\n\n              if (arm === 'ed25519') {\n                signer.ed25519PublicKey = accountIdtoAddress(attrs.signer().key());\n              } else if (arm === 'preAuthTx') {\n                signer.preAuthTx = attrs.signer().key().preAuthTx();\n              } else if (arm === 'hashX') {\n                signer.sha256Hash = attrs.signer().key().hashX();\n              }\n\n              signer.weight = attrs.signer().weight();\n              result.signer = signer;\n            }\n\n            break;\n          }\n        // the next case intentionally falls through!\n\n        case 'manageOffer':\n        case 'manageSellOffer':\n          {\n            result.type = 'manageSellOffer';\n            result.selling = _asset.Asset.fromOperation(attrs.selling());\n            result.buying = _asset.Asset.fromOperation(attrs.buying());\n            result.amount = this._fromXDRAmount(attrs.amount());\n            result.price = this._fromXDRPrice(attrs.price());\n            result.offerId = attrs.offerId().toString();\n            break;\n          }\n\n        case 'manageBuyOffer':\n          {\n            result.type = 'manageBuyOffer';\n            result.selling = _asset.Asset.fromOperation(attrs.selling());\n            result.buying = _asset.Asset.fromOperation(attrs.buying());\n            result.buyAmount = this._fromXDRAmount(attrs.buyAmount());\n            result.price = this._fromXDRPrice(attrs.price());\n            result.offerId = attrs.offerId().toString();\n            break;\n          }\n        // the next case intentionally falls through!\n\n        case 'createPassiveOffer':\n        case 'createPassiveSellOffer':\n          {\n            result.type = 'createPassiveSellOffer';\n            result.selling = _asset.Asset.fromOperation(attrs.selling());\n            result.buying = _asset.Asset.fromOperation(attrs.buying());\n            result.amount = this._fromXDRAmount(attrs.amount());\n            result.price = this._fromXDRPrice(attrs.price());\n            break;\n          }\n\n        case 'accountMerge':\n          {\n            result.type = 'accountMerge';\n            result.destination = (0, _decode_encode_muxed_account.encodeMuxedAccountToAddress)(attrs, withMuxing);\n            break;\n          }\n\n        case 'manageData':\n          {\n            result.type = 'manageData'; // manage_data.name is checked by iscntrl in stellar-core\n\n            result.name = attrs.dataName().toString('ascii');\n            result.value = attrs.dataValue();\n            break;\n          }\n\n        case 'inflation':\n          {\n            result.type = 'inflation';\n            break;\n          }\n\n        case 'bumpSequence':\n          {\n            result.type = 'bumpSequence';\n            result.bumpTo = attrs.bumpTo().toString();\n            break;\n          }\n\n        case 'createClaimableBalance':\n          {\n            result.type = 'createClaimableBalance';\n            result.asset = _asset.Asset.fromOperation(attrs.asset());\n            result.amount = this._fromXDRAmount(attrs.amount());\n            result.claimants = [];\n            attrs.claimants().forEach(function (claimant) {\n              result.claimants.push(_claimant.Claimant.fromXDR(claimant));\n            });\n            break;\n          }\n\n        case 'claimClaimableBalance':\n          {\n            result.type = 'claimClaimableBalance';\n            result.balanceId = attrs.toXDR('hex');\n            break;\n          }\n\n        case 'beginSponsoringFutureReserves':\n          {\n            result.type = 'beginSponsoringFutureReserves';\n            result.sponsoredId = accountIdtoAddress(attrs.sponsoredId());\n            break;\n          }\n\n        case 'endSponsoringFutureReserves':\n          {\n            result.type = 'endSponsoringFutureReserves';\n            break;\n          }\n\n        case 'revokeSponsorship':\n          {\n            extractRevokeSponshipDetails(attrs, result);\n            break;\n          }\n\n        case 'clawback':\n          {\n            result.type = 'clawback';\n            result.amount = this._fromXDRAmount(attrs.amount());\n            result.from = (0, _decode_encode_muxed_account.encodeMuxedAccountToAddress)(attrs.from());\n            result.asset = _asset.Asset.fromOperation(attrs.asset());\n            break;\n          }\n\n        case 'clawbackClaimableBalance':\n          {\n            result.type = 'clawbackClaimableBalance';\n            result.balanceId = attrs.toXDR('hex');\n            break;\n          }\n\n        case 'setTrustLineFlags':\n          {\n            result.type = 'setTrustLineFlags';\n            result.asset = _asset.Asset.fromOperation(attrs.asset());\n            result.trustor = accountIdtoAddress(attrs.trustor()); // Convert from the integer-bitwised flag into a sensible object that\n            // indicates true/false for each flag that's on/off.\n\n            var clears = attrs.clearFlags();\n            var sets = attrs.setFlags();\n            var mapping = {\n              authorized: _stellarXdr_generated2.default.TrustLineFlags.authorizedFlag(),\n              authorizedToMaintainLiabilities: _stellarXdr_generated2.default.TrustLineFlags.authorizedToMaintainLiabilitiesFlag(),\n              clawbackEnabled: _stellarXdr_generated2.default.TrustLineFlags.trustlineClawbackEnabledFlag()\n            };\n\n            var getFlagValue = function getFlagValue(key) {\n              var bit = mapping[key].value;\n\n              if (sets & bit) {\n                return true;\n              }\n\n              if (clears & bit) {\n                return false;\n              }\n\n              return undefined;\n            };\n\n            result.flags = {};\n            Object.keys(mapping).forEach(function (flagName) {\n              result.flags[flagName] = getFlagValue(flagName);\n            });\n            break;\n          }\n\n        case 'liquidityPoolDeposit':\n          {\n            result.type = 'liquidityPoolDeposit';\n            result.liquidityPoolId = attrs.liquidityPoolId().toString('hex');\n            result.maxAmountA = this._fromXDRAmount(attrs.maxAmountA());\n            result.maxAmountB = this._fromXDRAmount(attrs.maxAmountB());\n            result.minPrice = this._fromXDRPrice(attrs.minPrice());\n            result.maxPrice = this._fromXDRPrice(attrs.maxPrice());\n            break;\n          }\n\n        case 'liquidityPoolWithdraw':\n          {\n            result.type = 'liquidityPoolWithdraw';\n            result.liquidityPoolId = attrs.liquidityPoolId().toString('hex');\n            result.amount = this._fromXDRAmount(attrs.amount());\n            result.minAmountA = this._fromXDRAmount(attrs.minAmountA());\n            result.minAmountB = this._fromXDRAmount(attrs.minAmountB());\n            break;\n          }\n\n        default:\n          {\n            throw new Error('Unknown operation: ' + operationName);\n          }\n      }\n\n      return result;\n    }\n  }, {\n    key: 'isValidAmount',\n    value: function isValidAmount(value) {\n      var allowZero = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!(0, _isString2.default)(value)) {\n        return false;\n      }\n\n      var amount = void 0;\n\n      try {\n        amount = new _bignumber2.default(value);\n      } catch (e) {\n        return false;\n      }\n\n      if ( // == 0\n      !allowZero && amount.isZero() || // < 0\n      amount.isNegative() || // > Max value\n      amount.times(ONE).greaterThan(new _bignumber2.default(MAX_INT64).toString()) || // Decimal places (max 7)\n      amount.decimalPlaces() > 7 || // NaN or Infinity\n      amount.isNaN() || !amount.isFinite()) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: 'constructAmountRequirementsError',\n    value: function constructAmountRequirementsError(arg) {\n      return arg + ' argument must be of type String, represent a positive number and have at most 7 digits after the decimal';\n    }\n    /**\n     * Returns value converted to uint32 value or undefined.\n     * If `value` is not `Number`, `String` or `Undefined` then throws an error.\n     * Used in {@link Operation.setOptions}.\n     * @private\n     * @param {string} name Name of the property (used in error message only)\n     * @param {*} value Value to check\n     * @param {function(value, name)} isValidFunction Function to check other constraints (the argument will be a `Number`)\n     * @returns {undefined|Number}\n     */\n\n  }, {\n    key: '_checkUnsignedIntValue',\n    value: function _checkUnsignedIntValue(name, value) {\n      var isValidFunction = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      if ((0, _isUndefined2.default)(value)) {\n        return undefined;\n      }\n\n      if ((0, _isString2.default)(value)) {\n        value = parseFloat(value);\n      }\n\n      switch (true) {\n        case !(0, _isNumber2.default)(value) || !(0, _isFinite2.default)(value) || value % 1 !== 0:\n          throw new Error(name + ' value is invalid');\n\n        case value < 0:\n          throw new Error(name + ' value must be unsigned');\n\n        case !isValidFunction || isValidFunction && isValidFunction(value, name):\n          return value;\n\n        default:\n          throw new Error(name + ' value is invalid');\n      }\n    }\n    /**\n     * @private\n     * @param {string|BigNumber} value Value\n     * @returns {Hyper} XDR amount\n     */\n\n  }, {\n    key: '_toXDRAmount',\n    value: function _toXDRAmount(value) {\n      var amount = new _bignumber2.default(value).mul(ONE);\n      return _jsXdr.Hyper.fromString(amount.toString());\n    }\n    /**\n     * @private\n     * @param {string|BigNumber} value XDR amount\n     * @returns {BigNumber} Number\n     */\n\n  }, {\n    key: '_fromXDRAmount',\n    value: function _fromXDRAmount(value) {\n      return new _bignumber2.default(value).div(ONE).toFixed(7);\n    }\n    /**\n     * @private\n     * @param {object} price Price object\n     * @param {function} price.n numerator function that returns a value\n     * @param {function} price.d denominator function that returns a value\n     * @returns {BigNumber} Big string\n     */\n\n  }, {\n    key: '_fromXDRPrice',\n    value: function _fromXDRPrice(price) {\n      var n = new _bignumber2.default(price.n());\n      return n.div(new _bignumber2.default(price.d())).toString();\n    }\n    /**\n     * @private\n     * @param {object} price Price object\n     * @param {function} price.n numerator function that returns a value\n     * @param {function} price.d denominator function that returns a value\n     * @returns {object} XDR price object\n     */\n\n  }, {\n    key: '_toXDRPrice',\n    value: function _toXDRPrice(price) {\n      var xdrObject = void 0;\n\n      if (price.n && price.d) {\n        xdrObject = new _stellarXdr_generated2.default.Price(price);\n      } else {\n        price = new _bignumber2.default(price);\n        var approx = (0, _continued_fraction.best_r)(price);\n        xdrObject = new _stellarXdr_generated2.default.Price({\n          n: parseInt(approx[0], 10),\n          d: parseInt(approx[1], 10)\n        });\n      }\n\n      if (xdrObject.n() < 0 || xdrObject.d() < 0) {\n        throw new Error('price must be positive');\n      }\n\n      return xdrObject;\n    }\n  }]);\n\n  return Operation;\n}();\n\nfunction extractRevokeSponshipDetails(attrs, result) {\n  switch (attrs.switch().name) {\n    case 'revokeSponsorshipLedgerEntry':\n      {\n        var ledgerKey = attrs.ledgerKey();\n\n        switch (ledgerKey.switch().name) {\n          case _stellarXdr_generated2.default.LedgerEntryType.account().name:\n            {\n              result.type = 'revokeAccountSponsorship';\n              result.account = accountIdtoAddress(ledgerKey.account().accountId());\n              break;\n            }\n\n          case _stellarXdr_generated2.default.LedgerEntryType.trustline().name:\n            {\n              result.type = 'revokeTrustlineSponsorship';\n              result.account = accountIdtoAddress(ledgerKey.trustLine().accountId());\n              var xdrAsset = ledgerKey.trustLine().asset();\n\n              switch (xdrAsset.switch()) {\n                case _stellarXdr_generated2.default.AssetType.assetTypePoolShare():\n                  result.asset = _liquidity_pool_id.LiquidityPoolId.fromOperation(xdrAsset);\n                  break;\n\n                default:\n                  result.asset = _asset.Asset.fromOperation(xdrAsset);\n                  break;\n              }\n\n              break;\n            }\n\n          case _stellarXdr_generated2.default.LedgerEntryType.offer().name:\n            {\n              result.type = 'revokeOfferSponsorship';\n              result.seller = accountIdtoAddress(ledgerKey.offer().sellerId());\n              result.offerId = ledgerKey.offer().offerId().toString();\n              break;\n            }\n\n          case _stellarXdr_generated2.default.LedgerEntryType.data().name:\n            {\n              result.type = 'revokeDataSponsorship';\n              result.account = accountIdtoAddress(ledgerKey.data().accountId());\n              result.name = ledgerKey.data().dataName().toString('ascii');\n              break;\n            }\n\n          case _stellarXdr_generated2.default.LedgerEntryType.claimableBalance().name:\n            {\n              result.type = 'revokeClaimableBalanceSponsorship';\n              result.balanceId = ledgerKey.claimableBalance().balanceId().toXDR('hex');\n              break;\n            }\n\n          case _stellarXdr_generated2.default.LedgerEntryType.liquidityPool().name:\n            {\n              result.type = 'revokeLiquidityPoolSponsorship';\n              result.liquidityPoolId = ledgerKey.liquidityPool().liquidityPoolId().toString('hex');\n              break;\n            }\n\n          default:\n            {\n              throw new Error('Unknown ledgerKey: ' + attrs.switch().name);\n            }\n        }\n\n        break;\n      }\n\n    case 'revokeSponsorshipSigner':\n      {\n        result.type = 'revokeSignerSponsorship';\n        result.account = accountIdtoAddress(attrs.signer().accountId());\n        result.signer = convertXDRSignerKeyToObject(attrs.signer().signerKey());\n        break;\n      }\n\n    default:\n      {\n        throw new Error('Unknown revokeSponsorship: ' + attrs.switch().name);\n      }\n  }\n}\n\nfunction convertXDRSignerKeyToObject(signerKey) {\n  var attrs = {};\n\n  switch (signerKey.switch().name) {\n    case _stellarXdr_generated2.default.SignerKeyType.signerKeyTypeEd25519().name:\n      {\n        attrs.ed25519PublicKey = _strkey.StrKey.encodeEd25519PublicKey(signerKey.ed25519());\n        break;\n      }\n\n    case _stellarXdr_generated2.default.SignerKeyType.signerKeyTypePreAuthTx().name:\n      {\n        attrs.preAuthTx = signerKey.preAuthTx().toString('hex');\n        break;\n      }\n\n    case _stellarXdr_generated2.default.SignerKeyType.signerKeyTypeHashX().name:\n      {\n        attrs.sha256Hash = signerKey.hashX().toString('hex');\n        break;\n      }\n\n    default:\n      {\n        throw new Error('Unknown signerKey: ' + signerKey.switch().name);\n      }\n  }\n\n  return attrs;\n}\n\nfunction accountIdtoAddress(accountId) {\n  return _strkey.StrKey.encodeEd25519PublicKey(accountId.ed25519());\n} // Attach all imported operations as static methods on the Operation class\n\n\nOperation.accountMerge = ops.accountMerge;\nOperation.allowTrust = ops.allowTrust;\nOperation.bumpSequence = ops.bumpSequence;\nOperation.changeTrust = ops.changeTrust;\nOperation.createAccount = ops.createAccount;\nOperation.createClaimableBalance = ops.createClaimableBalance;\nOperation.claimClaimableBalance = ops.claimClaimableBalance;\nOperation.clawbackClaimableBalance = ops.clawbackClaimableBalance;\nOperation.createPassiveSellOffer = ops.createPassiveSellOffer;\nOperation.inflation = ops.inflation;\nOperation.manageData = ops.manageData;\nOperation.manageSellOffer = ops.manageSellOffer;\nOperation.manageBuyOffer = ops.manageBuyOffer;\nOperation.pathPaymentStrictReceive = ops.pathPaymentStrictReceive;\nOperation.pathPaymentStrictSend = ops.pathPaymentStrictSend;\nOperation.payment = ops.payment;\nOperation.setOptions = ops.setOptions;\nOperation.beginSponsoringFutureReserves = ops.beginSponsoringFutureReserves;\nOperation.endSponsoringFutureReserves = ops.endSponsoringFutureReserves;\nOperation.revokeAccountSponsorship = ops.revokeAccountSponsorship;\nOperation.revokeTrustlineSponsorship = ops.revokeTrustlineSponsorship;\nOperation.revokeOfferSponsorship = ops.revokeOfferSponsorship;\nOperation.revokeDataSponsorship = ops.revokeDataSponsorship;\nOperation.revokeClaimableBalanceSponsorship = ops.revokeClaimableBalanceSponsorship;\nOperation.revokeLiquidityPoolSponsorship = ops.revokeLiquidityPoolSponsorship;\nOperation.revokeSignerSponsorship = ops.revokeSignerSponsorship;\nOperation.clawback = ops.clawback;\nOperation.setTrustLineFlags = ops.setTrustLineFlags;\nOperation.liquidityPoolDeposit = ops.liquidityPoolDeposit;\nOperation.liquidityPoolWithdraw = ops.liquidityPoolWithdraw;","map":{"version":3,"sources":["C:/Users/masho/OneDrive/Desktop/Blockchain/Biconomy/Projects/NFT_minter/node_modules/stellar-base/lib/operation.js"],"names":["Object","defineProperty","exports","value","Operation","AuthClawbackEnabledFlag","AuthImmutableFlag","AuthRevocableFlag","AuthRequiredFlag","undefined","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_jsXdr","require","_bignumber","_bignumber2","_interopRequireDefault","_trimEnd","_trimEnd2","_isUndefined","_isUndefined2","_isString","_isString2","_isNumber","_isNumber2","_isFinite","_isFinite2","_continued_fraction","_asset","_liquidity_pool_asset","_claimant","_strkey","_liquidity_pool_id","_stellarXdr_generated","_stellarXdr_generated2","_index","ops","_interopRequireWildcard","_decode_encode_muxed_account","obj","__esModule","newObj","hasOwnProperty","call","default","_classCallCheck","instance","TypeError","ONE","MAX_INT64","setSourceAccount","opAttributes","opts","source","sourceAccount","decodeAddressToMuxedAccount","withMuxing","e","Error","fromXDRObject","operation","result","encodeMuxedAccountToAddress","attrs","body","operationName","switch","name","type","destination","accountIdtoAddress","startingBalance","_fromXDRAmount","asset","Asset","fromOperation","amount","sendAsset","sendMax","destAsset","destAmount","path","keys","forEach","pathKey","push","sendAmount","destMin","_path","line","AssetType","assetTypePoolShare","LiquidityPoolAsset","limit","trustor","assetCode","toString","authorize","inflationDest","clearFlags","setFlags","masterWeight","lowThreshold","medThreshold","highThreshold","homeDomain","signer","arm","ed25519PublicKey","preAuthTx","sha256Hash","hashX","weight","selling","buying","price","_fromXDRPrice","offerId","buyAmount","dataName","dataValue","bumpTo","claimants","claimant","Claimant","fromXDR","balanceId","toXDR","sponsoredId","extractRevokeSponshipDetails","from","clears","sets","mapping","authorized","TrustLineFlags","authorizedFlag","authorizedToMaintainLiabilities","authorizedToMaintainLiabilitiesFlag","clawbackEnabled","trustlineClawbackEnabledFlag","getFlagValue","bit","flags","flagName","liquidityPoolId","maxAmountA","maxAmountB","minPrice","maxPrice","minAmountA","minAmountB","isValidAmount","allowZero","arguments","isZero","isNegative","times","greaterThan","decimalPlaces","isNaN","isFinite","constructAmountRequirementsError","arg","_checkUnsignedIntValue","isValidFunction","parseFloat","_toXDRAmount","mul","Hyper","fromString","div","toFixed","n","d","_toXDRPrice","xdrObject","Price","approx","best_r","parseInt","ledgerKey","LedgerEntryType","account","accountId","trustline","trustLine","xdrAsset","LiquidityPoolId","offer","seller","sellerId","data","claimableBalance","liquidityPool","convertXDRSignerKeyToObject","signerKey","SignerKeyType","signerKeyTypeEd25519","StrKey","encodeEd25519PublicKey","ed25519","signerKeyTypePreAuthTx","signerKeyTypeHashX","accountMerge","allowTrust","bumpSequence","changeTrust","createAccount","createClaimableBalance","claimClaimableBalance","clawbackClaimableBalance","createPassiveSellOffer","inflation","manageData","manageSellOffer","manageBuyOffer","pathPaymentStrictReceive","pathPaymentStrictSend","payment","setOptions","beginSponsoringFutureReserves","endSponsoringFutureReserves","revokeAccountSponsorship","revokeTrustlineSponsorship","revokeOfferSponsorship","revokeDataSponsorship","revokeClaimableBalanceSponsorship","revokeLiquidityPoolSponsorship","revokeSignerSponsorship","clawback","setTrustLineFlags","liquidityPoolDeposit","liquidityPoolWithdraw"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Operation = exports.AuthClawbackEnabledFlag = exports.AuthImmutableFlag = exports.AuthRevocableFlag = exports.AuthRequiredFlag = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* eslint-disable no-bitwise */\n\nvar _jsXdr = require('js-xdr');\n\nvar _bignumber = require('bignumber.js');\n\nvar _bignumber2 = _interopRequireDefault(_bignumber);\n\nvar _trimEnd = require('lodash/trimEnd');\n\nvar _trimEnd2 = _interopRequireDefault(_trimEnd);\n\nvar _isUndefined = require('lodash/isUndefined');\n\nvar _isUndefined2 = _interopRequireDefault(_isUndefined);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isNumber = require('lodash/isNumber');\n\nvar _isNumber2 = _interopRequireDefault(_isNumber);\n\nvar _isFinite = require('lodash/isFinite');\n\nvar _isFinite2 = _interopRequireDefault(_isFinite);\n\nvar _continued_fraction = require('./util/continued_fraction');\n\nvar _asset = require('./asset');\n\nvar _liquidity_pool_asset = require('./liquidity_pool_asset');\n\nvar _claimant = require('./claimant');\n\nvar _strkey = require('./strkey');\n\nvar _liquidity_pool_id = require('./liquidity_pool_id');\n\nvar _stellarXdr_generated = require('./generated/stellar-xdr_generated');\n\nvar _stellarXdr_generated2 = _interopRequireDefault(_stellarXdr_generated);\n\nvar _index = require('./operations/index');\n\nvar ops = _interopRequireWildcard(_index);\n\nvar _decode_encode_muxed_account = require('./util/decode_encode_muxed_account');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ONE = 10000000;\nvar MAX_INT64 = '9223372036854775807';\n\n/**\n * When set using `{@link Operation.setOptions}` option, requires the issuing\n * account to give other accounts permission before they can hold the issuing\n * accountâ€™s credit.\n *\n * @constant\n * @see [Account flags](https://developers.stellar.org/docs/glossary/accounts/#flags)\n */\nvar AuthRequiredFlag = exports.AuthRequiredFlag = 1 << 0;\n/**\n * When set using `{@link Operation.setOptions}` option, allows the issuing\n * account to revoke its credit held by other accounts.\n *\n * @constant\n * @see [Account flags](https://developers.stellar.org/docs/glossary/accounts/#flags)\n */\nvar AuthRevocableFlag = exports.AuthRevocableFlag = 1 << 1;\n/**\n * When set using `{@link Operation.setOptions}` option, then none of the\n * authorization flags can be set and the account can never be deleted.\n *\n * @constant\n * @see [Account flags](https://developers.stellar.org/docs/glossary/accounts/#flags)\n */\nvar AuthImmutableFlag = exports.AuthImmutableFlag = 1 << 2;\n\n/**\n * When set using `{@link Operation.setOptions}` option, then any trustlines\n * created by this account can have a ClawbackOp operation submitted for the\n * corresponding asset.\n *\n * @constant\n * @see [Account flags](https://developers.stellar.org/docs/glossary/accounts/#flags)\n */\nvar AuthClawbackEnabledFlag = exports.AuthClawbackEnabledFlag = 1 << 3;\n\n/**\n * `Operation` class represents [operations](https://developers.stellar.org/docs/glossary/operations/) in Stellar network.\n * Use one of static methods to create operations:\n * * `{@link Operation.createAccount}`\n * * `{@link Operation.payment}`\n * * `{@link Operation.pathPaymentStrictReceive}`\n * * `{@link Operation.pathPaymentStrictSend}`\n * * `{@link Operation.manageSellOffer}`\n * * `{@link Operation.manageBuyOffer}`\n * * `{@link Operation.createPassiveSellOffer}`\n * * `{@link Operation.setOptions}`\n * * `{@link Operation.changeTrust}`\n * * `{@link Operation.allowTrust}`\n * * `{@link Operation.accountMerge}`\n * * `{@link Operation.inflation}`\n * * `{@link Operation.manageData}`\n * * `{@link Operation.bumpSequence}`\n * * `{@link Operation.createClaimableBalance}`\n * * `{@link Operation.claimClaimableBalance}`\n * * `{@link Operation.beginSponsoringFutureReserves}`\n * * `{@link Operation.endSponsoringFutureReserves}`\n * * `{@link Operation.revokeAccountSponsorship}`\n * * `{@link Operation.revokeTrustlineSponsorship}`\n * * `{@link Operation.revokeOfferSponsorship}`\n * * `{@link Operation.revokeDataSponsorship}`\n * * `{@link Operation.revokeClaimableBalanceSponsorship}`\n * * `{@link Operation.revokeLiquidityPoolSponsorship}`\n * * `{@link Operation.revokeSignerSponsorship}`\n * * `{@link Operation.clawback}`\n * * `{@link Operation.clawbackClaimableBalance}`\n * * `{@link Operation.setTrustLineFlags}`\n * * `{@link Operation.liquidityPoolDeposit}`\n * * `{@link Operation.liquidityPoolWithdraw}`\n *\n * @class Operation\n */\n\nvar Operation = exports.Operation = function () {\n  function Operation() {\n    _classCallCheck(this, Operation);\n  }\n\n  _createClass(Operation, null, [{\n    key: 'setSourceAccount',\n    value: function setSourceAccount(opAttributes, opts) {\n      if (opts.source) {\n        try {\n          opAttributes.sourceAccount = (0, _decode_encode_muxed_account.decodeAddressToMuxedAccount)(opts.source, opts.withMuxing);\n        } catch (e) {\n          throw new Error('Source address is invalid');\n        }\n      }\n    }\n\n    /**\n     * Deconstructs the raw XDR operation object into the structured object that\n     * was used to create the operation (i.e. the `opts` parameter to most ops).\n     *\n     * @param {xdr.Operation}   operation - An XDR Operation.\n     * @param {boolean}         [withMuxing] - Indicates that if the operation\n     *     contains M... addresses, they should be interpreted fully as muxed\n     *     accounts. By default, this option is disabled until muxed accounts are\n     *     mature.\n     *\n     * @return {Operation}\n     */\n\n  }, {\n    key: 'fromXDRObject',\n    value: function fromXDRObject(operation, withMuxing) {\n      var result = {};\n      if (operation.sourceAccount()) {\n        result.source = (0, _decode_encode_muxed_account.encodeMuxedAccountToAddress)(operation.sourceAccount(), withMuxing);\n      }\n\n      var attrs = operation.body().value();\n      var operationName = operation.body().switch().name;\n\n      switch (operationName) {\n        case 'createAccount':\n          {\n            result.type = 'createAccount';\n            result.destination = accountIdtoAddress(attrs.destination());\n            result.startingBalance = this._fromXDRAmount(attrs.startingBalance());\n            break;\n          }\n        case 'payment':\n          {\n            result.type = 'payment';\n            result.destination = (0, _decode_encode_muxed_account.encodeMuxedAccountToAddress)(attrs.destination(), withMuxing);\n            result.asset = _asset.Asset.fromOperation(attrs.asset());\n            result.amount = this._fromXDRAmount(attrs.amount());\n            break;\n          }\n        case 'pathPaymentStrictReceive':\n          {\n            result.type = 'pathPaymentStrictReceive';\n            result.sendAsset = _asset.Asset.fromOperation(attrs.sendAsset());\n            result.sendMax = this._fromXDRAmount(attrs.sendMax());\n            result.destination = (0, _decode_encode_muxed_account.encodeMuxedAccountToAddress)(attrs.destination(), withMuxing);\n            result.destAsset = _asset.Asset.fromOperation(attrs.destAsset());\n            result.destAmount = this._fromXDRAmount(attrs.destAmount());\n            result.path = [];\n\n            var path = attrs.path();\n\n            // note that Object.values isn't supported by node 6!\n            Object.keys(path).forEach(function (pathKey) {\n              result.path.push(_asset.Asset.fromOperation(path[pathKey]));\n            });\n            break;\n          }\n        case 'pathPaymentStrictSend':\n          {\n            result.type = 'pathPaymentStrictSend';\n            result.sendAsset = _asset.Asset.fromOperation(attrs.sendAsset());\n            result.sendAmount = this._fromXDRAmount(attrs.sendAmount());\n            result.destination = (0, _decode_encode_muxed_account.encodeMuxedAccountToAddress)(attrs.destination(), withMuxing);\n            result.destAsset = _asset.Asset.fromOperation(attrs.destAsset());\n            result.destMin = this._fromXDRAmount(attrs.destMin());\n            result.path = [];\n\n            var _path = attrs.path();\n\n            // note that Object.values isn't supported by node 6!\n            Object.keys(_path).forEach(function (pathKey) {\n              result.path.push(_asset.Asset.fromOperation(_path[pathKey]));\n            });\n            break;\n          }\n        case 'changeTrust':\n          {\n            result.type = 'changeTrust';\n            switch (attrs.line().switch()) {\n              case _stellarXdr_generated2.default.AssetType.assetTypePoolShare():\n                result.line = _liquidity_pool_asset.LiquidityPoolAsset.fromOperation(attrs.line());\n                break;\n              default:\n                result.line = _asset.Asset.fromOperation(attrs.line());\n                break;\n            }\n            result.limit = this._fromXDRAmount(attrs.limit());\n            break;\n          }\n        case 'allowTrust':\n          {\n            result.type = 'allowTrust';\n            result.trustor = accountIdtoAddress(attrs.trustor());\n            result.assetCode = attrs.asset().value().toString();\n            result.assetCode = (0, _trimEnd2.default)(result.assetCode, '\\0');\n            result.authorize = attrs.authorize();\n            break;\n          }\n        case 'setOptions':\n          {\n            result.type = 'setOptions';\n            if (attrs.inflationDest()) {\n              result.inflationDest = accountIdtoAddress(attrs.inflationDest());\n            }\n\n            result.clearFlags = attrs.clearFlags();\n            result.setFlags = attrs.setFlags();\n            result.masterWeight = attrs.masterWeight();\n            result.lowThreshold = attrs.lowThreshold();\n            result.medThreshold = attrs.medThreshold();\n            result.highThreshold = attrs.highThreshold();\n            // home_domain is checked by iscntrl in stellar-core\n            result.homeDomain = attrs.homeDomain() !== undefined ? attrs.homeDomain().toString('ascii') : undefined;\n\n            if (attrs.signer()) {\n              var signer = {};\n              var arm = attrs.signer().key().arm();\n              if (arm === 'ed25519') {\n                signer.ed25519PublicKey = accountIdtoAddress(attrs.signer().key());\n              } else if (arm === 'preAuthTx') {\n                signer.preAuthTx = attrs.signer().key().preAuthTx();\n              } else if (arm === 'hashX') {\n                signer.sha256Hash = attrs.signer().key().hashX();\n              }\n\n              signer.weight = attrs.signer().weight();\n              result.signer = signer;\n            }\n            break;\n          }\n        // the next case intentionally falls through!\n        case 'manageOffer':\n        case 'manageSellOffer':\n          {\n            result.type = 'manageSellOffer';\n            result.selling = _asset.Asset.fromOperation(attrs.selling());\n            result.buying = _asset.Asset.fromOperation(attrs.buying());\n            result.amount = this._fromXDRAmount(attrs.amount());\n            result.price = this._fromXDRPrice(attrs.price());\n            result.offerId = attrs.offerId().toString();\n            break;\n          }\n        case 'manageBuyOffer':\n          {\n            result.type = 'manageBuyOffer';\n            result.selling = _asset.Asset.fromOperation(attrs.selling());\n            result.buying = _asset.Asset.fromOperation(attrs.buying());\n            result.buyAmount = this._fromXDRAmount(attrs.buyAmount());\n            result.price = this._fromXDRPrice(attrs.price());\n            result.offerId = attrs.offerId().toString();\n            break;\n          }\n        // the next case intentionally falls through!\n        case 'createPassiveOffer':\n        case 'createPassiveSellOffer':\n          {\n            result.type = 'createPassiveSellOffer';\n            result.selling = _asset.Asset.fromOperation(attrs.selling());\n            result.buying = _asset.Asset.fromOperation(attrs.buying());\n            result.amount = this._fromXDRAmount(attrs.amount());\n            result.price = this._fromXDRPrice(attrs.price());\n            break;\n          }\n        case 'accountMerge':\n          {\n            result.type = 'accountMerge';\n            result.destination = (0, _decode_encode_muxed_account.encodeMuxedAccountToAddress)(attrs, withMuxing);\n            break;\n          }\n        case 'manageData':\n          {\n            result.type = 'manageData';\n            // manage_data.name is checked by iscntrl in stellar-core\n            result.name = attrs.dataName().toString('ascii');\n            result.value = attrs.dataValue();\n            break;\n          }\n        case 'inflation':\n          {\n            result.type = 'inflation';\n            break;\n          }\n        case 'bumpSequence':\n          {\n            result.type = 'bumpSequence';\n            result.bumpTo = attrs.bumpTo().toString();\n            break;\n          }\n        case 'createClaimableBalance':\n          {\n            result.type = 'createClaimableBalance';\n            result.asset = _asset.Asset.fromOperation(attrs.asset());\n            result.amount = this._fromXDRAmount(attrs.amount());\n            result.claimants = [];\n            attrs.claimants().forEach(function (claimant) {\n              result.claimants.push(_claimant.Claimant.fromXDR(claimant));\n            });\n            break;\n          }\n        case 'claimClaimableBalance':\n          {\n            result.type = 'claimClaimableBalance';\n            result.balanceId = attrs.toXDR('hex');\n            break;\n          }\n        case 'beginSponsoringFutureReserves':\n          {\n            result.type = 'beginSponsoringFutureReserves';\n            result.sponsoredId = accountIdtoAddress(attrs.sponsoredId());\n            break;\n          }\n        case 'endSponsoringFutureReserves':\n          {\n            result.type = 'endSponsoringFutureReserves';\n            break;\n          }\n        case 'revokeSponsorship':\n          {\n            extractRevokeSponshipDetails(attrs, result);\n            break;\n          }\n        case 'clawback':\n          {\n            result.type = 'clawback';\n            result.amount = this._fromXDRAmount(attrs.amount());\n            result.from = (0, _decode_encode_muxed_account.encodeMuxedAccountToAddress)(attrs.from());\n            result.asset = _asset.Asset.fromOperation(attrs.asset());\n            break;\n          }\n        case 'clawbackClaimableBalance':\n          {\n            result.type = 'clawbackClaimableBalance';\n            result.balanceId = attrs.toXDR('hex');\n            break;\n          }\n        case 'setTrustLineFlags':\n          {\n            result.type = 'setTrustLineFlags';\n            result.asset = _asset.Asset.fromOperation(attrs.asset());\n            result.trustor = accountIdtoAddress(attrs.trustor());\n\n            // Convert from the integer-bitwised flag into a sensible object that\n            // indicates true/false for each flag that's on/off.\n            var clears = attrs.clearFlags();\n            var sets = attrs.setFlags();\n\n            var mapping = {\n              authorized: _stellarXdr_generated2.default.TrustLineFlags.authorizedFlag(),\n              authorizedToMaintainLiabilities: _stellarXdr_generated2.default.TrustLineFlags.authorizedToMaintainLiabilitiesFlag(),\n              clawbackEnabled: _stellarXdr_generated2.default.TrustLineFlags.trustlineClawbackEnabledFlag()\n            };\n\n            var getFlagValue = function getFlagValue(key) {\n              var bit = mapping[key].value;\n              if (sets & bit) {\n                return true;\n              }\n              if (clears & bit) {\n                return false;\n              }\n              return undefined;\n            };\n\n            result.flags = {};\n            Object.keys(mapping).forEach(function (flagName) {\n              result.flags[flagName] = getFlagValue(flagName);\n            });\n\n            break;\n          }\n        case 'liquidityPoolDeposit':\n          {\n            result.type = 'liquidityPoolDeposit';\n            result.liquidityPoolId = attrs.liquidityPoolId().toString('hex');\n            result.maxAmountA = this._fromXDRAmount(attrs.maxAmountA());\n            result.maxAmountB = this._fromXDRAmount(attrs.maxAmountB());\n            result.minPrice = this._fromXDRPrice(attrs.minPrice());\n            result.maxPrice = this._fromXDRPrice(attrs.maxPrice());\n            break;\n          }\n        case 'liquidityPoolWithdraw':\n          {\n            result.type = 'liquidityPoolWithdraw';\n            result.liquidityPoolId = attrs.liquidityPoolId().toString('hex');\n            result.amount = this._fromXDRAmount(attrs.amount());\n            result.minAmountA = this._fromXDRAmount(attrs.minAmountA());\n            result.minAmountB = this._fromXDRAmount(attrs.minAmountB());\n            break;\n          }\n        default:\n          {\n            throw new Error('Unknown operation: ' + operationName);\n          }\n      }\n      return result;\n    }\n  }, {\n    key: 'isValidAmount',\n    value: function isValidAmount(value) {\n      var allowZero = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!(0, _isString2.default)(value)) {\n        return false;\n      }\n\n      var amount = void 0;\n      try {\n        amount = new _bignumber2.default(value);\n      } catch (e) {\n        return false;\n      }\n\n      if (\n      // == 0\n      !allowZero && amount.isZero() ||\n      // < 0\n      amount.isNegative() ||\n      // > Max value\n      amount.times(ONE).greaterThan(new _bignumber2.default(MAX_INT64).toString()) ||\n      // Decimal places (max 7)\n      amount.decimalPlaces() > 7 ||\n      // NaN or Infinity\n      amount.isNaN() || !amount.isFinite()) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: 'constructAmountRequirementsError',\n    value: function constructAmountRequirementsError(arg) {\n      return arg + ' argument must be of type String, represent a positive number and have at most 7 digits after the decimal';\n    }\n\n    /**\n     * Returns value converted to uint32 value or undefined.\n     * If `value` is not `Number`, `String` or `Undefined` then throws an error.\n     * Used in {@link Operation.setOptions}.\n     * @private\n     * @param {string} name Name of the property (used in error message only)\n     * @param {*} value Value to check\n     * @param {function(value, name)} isValidFunction Function to check other constraints (the argument will be a `Number`)\n     * @returns {undefined|Number}\n     */\n\n  }, {\n    key: '_checkUnsignedIntValue',\n    value: function _checkUnsignedIntValue(name, value) {\n      var isValidFunction = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      if ((0, _isUndefined2.default)(value)) {\n        return undefined;\n      }\n\n      if ((0, _isString2.default)(value)) {\n        value = parseFloat(value);\n      }\n\n      switch (true) {\n        case !(0, _isNumber2.default)(value) || !(0, _isFinite2.default)(value) || value % 1 !== 0:\n          throw new Error(name + ' value is invalid');\n        case value < 0:\n          throw new Error(name + ' value must be unsigned');\n        case !isValidFunction || isValidFunction && isValidFunction(value, name):\n          return value;\n        default:\n          throw new Error(name + ' value is invalid');\n      }\n    }\n    /**\n     * @private\n     * @param {string|BigNumber} value Value\n     * @returns {Hyper} XDR amount\n     */\n\n  }, {\n    key: '_toXDRAmount',\n    value: function _toXDRAmount(value) {\n      var amount = new _bignumber2.default(value).mul(ONE);\n      return _jsXdr.Hyper.fromString(amount.toString());\n    }\n\n    /**\n     * @private\n     * @param {string|BigNumber} value XDR amount\n     * @returns {BigNumber} Number\n     */\n\n  }, {\n    key: '_fromXDRAmount',\n    value: function _fromXDRAmount(value) {\n      return new _bignumber2.default(value).div(ONE).toFixed(7);\n    }\n\n    /**\n     * @private\n     * @param {object} price Price object\n     * @param {function} price.n numerator function that returns a value\n     * @param {function} price.d denominator function that returns a value\n     * @returns {BigNumber} Big string\n     */\n\n  }, {\n    key: '_fromXDRPrice',\n    value: function _fromXDRPrice(price) {\n      var n = new _bignumber2.default(price.n());\n      return n.div(new _bignumber2.default(price.d())).toString();\n    }\n\n    /**\n     * @private\n     * @param {object} price Price object\n     * @param {function} price.n numerator function that returns a value\n     * @param {function} price.d denominator function that returns a value\n     * @returns {object} XDR price object\n     */\n\n  }, {\n    key: '_toXDRPrice',\n    value: function _toXDRPrice(price) {\n      var xdrObject = void 0;\n      if (price.n && price.d) {\n        xdrObject = new _stellarXdr_generated2.default.Price(price);\n      } else {\n        price = new _bignumber2.default(price);\n        var approx = (0, _continued_fraction.best_r)(price);\n        xdrObject = new _stellarXdr_generated2.default.Price({\n          n: parseInt(approx[0], 10),\n          d: parseInt(approx[1], 10)\n        });\n      }\n\n      if (xdrObject.n() < 0 || xdrObject.d() < 0) {\n        throw new Error('price must be positive');\n      }\n\n      return xdrObject;\n    }\n  }]);\n\n  return Operation;\n}();\n\nfunction extractRevokeSponshipDetails(attrs, result) {\n  switch (attrs.switch().name) {\n    case 'revokeSponsorshipLedgerEntry':\n      {\n        var ledgerKey = attrs.ledgerKey();\n        switch (ledgerKey.switch().name) {\n          case _stellarXdr_generated2.default.LedgerEntryType.account().name:\n            {\n              result.type = 'revokeAccountSponsorship';\n              result.account = accountIdtoAddress(ledgerKey.account().accountId());\n              break;\n            }\n          case _stellarXdr_generated2.default.LedgerEntryType.trustline().name:\n            {\n              result.type = 'revokeTrustlineSponsorship';\n              result.account = accountIdtoAddress(ledgerKey.trustLine().accountId());\n              var xdrAsset = ledgerKey.trustLine().asset();\n              switch (xdrAsset.switch()) {\n                case _stellarXdr_generated2.default.AssetType.assetTypePoolShare():\n                  result.asset = _liquidity_pool_id.LiquidityPoolId.fromOperation(xdrAsset);\n                  break;\n                default:\n                  result.asset = _asset.Asset.fromOperation(xdrAsset);\n                  break;\n              }\n              break;\n            }\n          case _stellarXdr_generated2.default.LedgerEntryType.offer().name:\n            {\n              result.type = 'revokeOfferSponsorship';\n              result.seller = accountIdtoAddress(ledgerKey.offer().sellerId());\n              result.offerId = ledgerKey.offer().offerId().toString();\n              break;\n            }\n          case _stellarXdr_generated2.default.LedgerEntryType.data().name:\n            {\n              result.type = 'revokeDataSponsorship';\n              result.account = accountIdtoAddress(ledgerKey.data().accountId());\n              result.name = ledgerKey.data().dataName().toString('ascii');\n              break;\n            }\n          case _stellarXdr_generated2.default.LedgerEntryType.claimableBalance().name:\n            {\n              result.type = 'revokeClaimableBalanceSponsorship';\n              result.balanceId = ledgerKey.claimableBalance().balanceId().toXDR('hex');\n              break;\n            }\n          case _stellarXdr_generated2.default.LedgerEntryType.liquidityPool().name:\n            {\n              result.type = 'revokeLiquidityPoolSponsorship';\n              result.liquidityPoolId = ledgerKey.liquidityPool().liquidityPoolId().toString('hex');\n              break;\n            }\n          default:\n            {\n              throw new Error('Unknown ledgerKey: ' + attrs.switch().name);\n            }\n        }\n        break;\n      }\n    case 'revokeSponsorshipSigner':\n      {\n        result.type = 'revokeSignerSponsorship';\n        result.account = accountIdtoAddress(attrs.signer().accountId());\n        result.signer = convertXDRSignerKeyToObject(attrs.signer().signerKey());\n        break;\n      }\n    default:\n      {\n        throw new Error('Unknown revokeSponsorship: ' + attrs.switch().name);\n      }\n  }\n}\n\nfunction convertXDRSignerKeyToObject(signerKey) {\n  var attrs = {};\n  switch (signerKey.switch().name) {\n    case _stellarXdr_generated2.default.SignerKeyType.signerKeyTypeEd25519().name:\n      {\n        attrs.ed25519PublicKey = _strkey.StrKey.encodeEd25519PublicKey(signerKey.ed25519());\n        break;\n      }\n    case _stellarXdr_generated2.default.SignerKeyType.signerKeyTypePreAuthTx().name:\n      {\n        attrs.preAuthTx = signerKey.preAuthTx().toString('hex');\n        break;\n      }\n    case _stellarXdr_generated2.default.SignerKeyType.signerKeyTypeHashX().name:\n      {\n        attrs.sha256Hash = signerKey.hashX().toString('hex');\n        break;\n      }\n    default:\n      {\n        throw new Error('Unknown signerKey: ' + signerKey.switch().name);\n      }\n  }\n\n  return attrs;\n}\n\nfunction accountIdtoAddress(accountId) {\n  return _strkey.StrKey.encodeEd25519PublicKey(accountId.ed25519());\n}\n\n// Attach all imported operations as static methods on the Operation class\nOperation.accountMerge = ops.accountMerge;\nOperation.allowTrust = ops.allowTrust;\nOperation.bumpSequence = ops.bumpSequence;\nOperation.changeTrust = ops.changeTrust;\nOperation.createAccount = ops.createAccount;\nOperation.createClaimableBalance = ops.createClaimableBalance;\nOperation.claimClaimableBalance = ops.claimClaimableBalance;\nOperation.clawbackClaimableBalance = ops.clawbackClaimableBalance;\nOperation.createPassiveSellOffer = ops.createPassiveSellOffer;\nOperation.inflation = ops.inflation;\nOperation.manageData = ops.manageData;\nOperation.manageSellOffer = ops.manageSellOffer;\nOperation.manageBuyOffer = ops.manageBuyOffer;\nOperation.pathPaymentStrictReceive = ops.pathPaymentStrictReceive;\nOperation.pathPaymentStrictSend = ops.pathPaymentStrictSend;\nOperation.payment = ops.payment;\nOperation.setOptions = ops.setOptions;\nOperation.beginSponsoringFutureReserves = ops.beginSponsoringFutureReserves;\nOperation.endSponsoringFutureReserves = ops.endSponsoringFutureReserves;\nOperation.revokeAccountSponsorship = ops.revokeAccountSponsorship;\nOperation.revokeTrustlineSponsorship = ops.revokeTrustlineSponsorship;\nOperation.revokeOfferSponsorship = ops.revokeOfferSponsorship;\nOperation.revokeDataSponsorship = ops.revokeDataSponsorship;\nOperation.revokeClaimableBalanceSponsorship = ops.revokeClaimableBalanceSponsorship;\nOperation.revokeLiquidityPoolSponsorship = ops.revokeLiquidityPoolSponsorship;\nOperation.revokeSignerSponsorship = ops.revokeSignerSponsorship;\nOperation.clawback = ops.clawback;\nOperation.setTrustLineFlags = ops.setTrustLineFlags;\nOperation.liquidityPoolDeposit = ops.liquidityPoolDeposit;\nOperation.liquidityPoolWithdraw = ops.liquidityPoolWithdraw;"]},"metadata":{},"sourceType":"script"}