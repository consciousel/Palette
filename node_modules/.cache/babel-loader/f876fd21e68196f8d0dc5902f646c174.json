{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.JSONRPC = void 0;\n\nconst utils = require(\"../utils\");\n\nconst thorifyResult = function (result) {\n  // tricks for compatible with original web3 instance\n  // non-objects or non-arrays doesn't need isThorified property since thorify just overwritten 3 formatters\n  // which all accept object as input\n  if (utils.isArray(result)) {\n    result = result.map(item => {\n      Object.defineProperty(item, 'isThorified', {\n        get: () => true\n      });\n      return item;\n    });\n  } else if (utils.isObject(result)) {\n    Object.defineProperty(result, 'isThorified', {\n      get: () => true\n    });\n  }\n\n  return result;\n};\n\nclass JSONRPC {\n  constructor(payload) {\n    this.id = payload.id;\n    this.method = payload.method;\n    this.params = payload.params;\n  }\n\n  makeResult(result) {\n    return {\n      id: this.id,\n      jsonrpc: '2.0',\n      result: thorifyResult(result)\n    };\n  }\n\n  makeError(message) {\n    return {\n      id: this.id,\n      jsonrpc: '2.0',\n      error: {\n        message\n      }\n    };\n  }\n\n  makeSubResult(result) {\n    return {\n      id: this.id,\n      jsonrpc: '2.0',\n      method: this.method,\n      params: {\n        result: {\n          data: thorifyResult(result)\n        },\n        subscription: this.id\n      }\n    };\n  }\n\n  makeSubError(error) {\n    return {\n      id: this.id,\n      jsonrpc: '2.0',\n      method: this.method,\n      params: {\n        result: {\n          error\n        },\n        subscription: this.id\n      }\n    };\n  }\n\n}\n\nexports.JSONRPC = JSONRPC;","map":{"version":3,"mappings":"AAAA;;;;;;;AACA;;AAgCA,MAAMA,aAAa,GAAG,UAASC,MAAT,EAAoB;AACtC;AACA;AACA;AACA,MAAIC,KAAK,CAACC,OAAN,CAAcF,MAAd,CAAJ,EAA2B;AACvBA,UAAM,GAAGA,MAAM,CAACG,GAAP,CAAYC,IAAD,IAAc;AAC9BC,YAAM,CAACC,cAAP,CAAsBF,IAAtB,EAA4B,aAA5B,EAA2C;AAAEG,WAAG,EAAE,MAAM;AAAb,OAA3C;AACA,aAAOH,IAAP;AACH,KAHQ,CAAT;AAIH,GALD,MAKO,IAAIH,KAAK,CAACO,QAAN,CAAeR,MAAf,CAAJ,EAA4B;AAC/BK,UAAM,CAACC,cAAP,CAAsBN,MAAtB,EAA8B,aAA9B,EAA6C;AAAEO,SAAG,EAAE,MAAM;AAAb,KAA7C;AACH;;AACD,SAAOP,MAAP;AACH,CAbD;;AAeA,MAAaS,OAAb,CAAoB;AAKhBC,cAAYC,OAAZ,EAA+B;AAC3B,SAAKC,EAAL,GAAUD,OAAO,CAACC,EAAlB;AACA,SAAKC,MAAL,GAAcF,OAAO,CAACE,MAAtB;AACA,SAAKC,MAAL,GAAcH,OAAO,CAACG,MAAtB;AACH;;AAEMC,YAAU,CAACf,MAAD,EAAY;AACzB,WAAO;AACHY,QAAE,EAAE,KAAKA,EADN;AAEHI,aAAO,EAAE,KAFN;AAGHhB,YAAM,EAAED,aAAa,CAACC,MAAD;AAHlB,KAAP;AAKH;;AAEMiB,WAAS,CAACC,OAAD,EAAgB;AAC5B,WAAO;AACHN,QAAE,EAAE,KAAKA,EADN;AAEHI,aAAO,EAAE,KAFN;AAGHG,WAAK,EAAE;AACHD;AADG;AAHJ,KAAP;AAOH;;AAEME,eAAa,CAACpB,MAAD,EAAY;AAC5B,WAAO;AACHY,QAAE,EAAE,KAAKA,EADN;AAEHI,aAAO,EAAE,KAFN;AAGHH,YAAM,EAAE,KAAKA,MAHV;AAIHC,YAAM,EAAE;AACJd,cAAM,EAAE;AACJqB,cAAI,EAAEtB,aAAa,CAACC,MAAD;AADf,SADJ;AAIJsB,oBAAY,EAAE,KAAKV;AAJf;AAJL,KAAP;AAWH;;AAEMW,cAAY,CAACJ,KAAD,EAAW;AAC1B,WAAO;AACHP,QAAE,EAAE,KAAKA,EADN;AAEHI,aAAO,EAAE,KAFN;AAGHH,YAAM,EAAE,KAAKA,MAHV;AAIHC,YAAM,EAAE;AACJd,cAAM,EAAE;AACJmB;AADI,SADJ;AAIJG,oBAAY,EAAE,KAAKV;AAJf;AAJL,KAAP;AAWH;;AAvDe;;AAApBY","names":["thorifyResult","result","utils","isArray","map","item","Object","defineProperty","get","isObject","JSONRPC","constructor","payload","id","method","params","makeResult","jsonrpc","makeError","message","error","makeSubResult","data","subscription","makeSubError","exports"],"sourceRoot":"","sources":["../../src/provider/json-rpc.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}