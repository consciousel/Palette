{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getGasFromValue = exports.SystemWrapper = exports.SystemConstants = void 0;\n\nconst path_1 = __importDefault(require(\"path\"));\n\nconst __1 = require(\"..\");\n\nconst __2 = require(\"../..\");\n\nconst testutils_1 = require(\"../../testutils\");\n\nconst nativeSerializer_1 = require(\"../nativeSerializer\");\n\nconst argumentErrorContext_1 = require(\"../argumentErrorContext\");\n\nconst chainSendContext_1 = require(\"./chainSendContext\");\n\nvar SystemConstants;\n\n(function (SystemConstants) {\n  SystemConstants.SYSTEM_ABI_PATH = path_1.default.join(__dirname, \"../../../abi\");\n  SystemConstants.ESDT_CONTRACT_ADDRESS = new __2.Address(\"erd1qqqqqqqqqqqqqqqpqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqzllls8a5w6u\");\n  SystemConstants.MIN_TRANSACTION_GAS = 50000;\n  SystemConstants.ESDT_ISSUE_GAS_LIMIT = 60000000;\n  SystemConstants.ESDT_TRANSFER_GAS_LIMIT = 500000;\n  SystemConstants.ESDT_NFT_TRANSFER_GAS_LIMIT = 1000000;\n  SystemConstants.ESDT_BASE_GAS_LIMIT = 6000000;\n})(SystemConstants = exports.SystemConstants || (exports.SystemConstants = {}));\n\nclass SystemWrapper extends chainSendContext_1.ChainSendContext {\n  constructor(provider, context, sendContract, esdtSystemContract, issueCost, builtinFunctions) {\n    super(context);\n    this.provider = provider;\n    this.sendWrapper = sendContract;\n    this.esdtSystemContract = esdtSystemContract;\n    this.issueCost = issueCost;\n    this.builtinFunctions = builtinFunctions;\n  }\n\n  loadWrapper(projectPath, filenameHint, context) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return yield __1.ContractWrapper.loadProject(this.provider, this.builtinFunctions, projectPath, filenameHint, context);\n    });\n  }\n\n  static getEsdtContractConfig(esdtSystemContract) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let [ownerAddress, baseIssuingCost, minTokenNameLength, maxTokenNameLength] = yield esdtSystemContract.query.getContractConfig();\n      return {\n        ownerAddress,\n        baseIssuingCost: __2.Egld.raw(baseIssuingCost),\n        minTokenNameLength,\n        maxTokenNameLength\n      };\n    });\n  }\n\n  static load(provider) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let context = new __1.SendContext(provider).logger(new __1.ContractLogger());\n      let builtinFunctions = yield __1.ContractWrapper.loadProject(provider, null, SystemConstants.SYSTEM_ABI_PATH, \"builtinFunctions\", context);\n      let sendWrapper = yield __1.ContractWrapper.loadProject(provider, builtinFunctions, SystemConstants.SYSTEM_ABI_PATH, \"sendWrapper\", context);\n      let esdtSystemContract = yield __1.ContractWrapper.loadProject(provider, builtinFunctions, SystemConstants.SYSTEM_ABI_PATH, \"esdtSystemContract\", context);\n      esdtSystemContract.address(SystemConstants.ESDT_CONTRACT_ADDRESS);\n      let issueCost;\n\n      if (provider instanceof testutils_1.MockProvider) {\n        issueCost = __2.Balance.Zero();\n      } else {\n        let contractConfig = yield this.getEsdtContractConfig(esdtSystemContract);\n        issueCost = contractConfig.baseIssuingCost;\n      }\n\n      return new SystemWrapper(provider, context, sendWrapper, esdtSystemContract, issueCost, builtinFunctions);\n    });\n  }\n\n  send(receiver) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let address = nativeSerializer_1.NativeSerializer.convertNativeToAddress(receiver, new argumentErrorContext_1.ArgumentErrorContext(\"send\", \"0\", new __1.EndpointParameterDefinition(\"receiver\", \"\", new __1.AddressType())));\n      yield this.sendWrapper.address(address).autoGas(0).call[\"\"]();\n    });\n  }\n\n  issueFungible() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return __awaiter(this, void 0, void 0, function* () {\n      let {\n        resultingCalls: [issueResult]\n      } = yield this.esdtSystemContract.gas(SystemConstants.ESDT_ISSUE_GAS_LIMIT).value(this.issueCost).results.issue(...args);\n\n      let {\n        tokenIdentifier\n      } = __2.EsdtHelpers.extractFieldsFromEsdtTransferDataField(issueResult.data);\n\n      tokenIdentifier = Buffer.from(tokenIdentifier, \"hex\").toString();\n      return this.recallToken(tokenIdentifier);\n    });\n  }\n\n  issueSemiFungible() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return __awaiter(this, void 0, void 0, function* () {\n      let tokenIdentifier = (yield this.esdtSystemContract.gas(SystemConstants.ESDT_ISSUE_GAS_LIMIT).value(this.issueCost).call.issueSemiFungible(...args)).toString();\n      return this.recallToken(tokenIdentifier);\n    });\n  }\n\n  issueNonFungible() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return __awaiter(this, void 0, void 0, function* () {\n      let tokenIdentifier = (yield this.esdtSystemContract.gas(SystemConstants.ESDT_ISSUE_GAS_LIMIT).value(this.issueCost).call.issueNonFungible(...args)).toString();\n      return this.recallToken(tokenIdentifier);\n    });\n  }\n\n  esdtNftCreate(balanceBuilder) {\n    for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n      args[_key4 - 1] = arguments[_key4];\n    }\n\n    return __awaiter(this, void 0, void 0, function* () {\n      let nonce = yield this.builtinFunctions.address(this.context.getSender()).gas(SystemConstants.ESDT_BASE_GAS_LIMIT).call.ESDTNFTCreate(balanceBuilder, ...args);\n      return balanceBuilder.nonce(nonce);\n    });\n  }\n\n  recallToken(tokenIdentifier) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let tokenProperties = yield this.esdtSystemContract.query.getTokenProperties(tokenIdentifier);\n\n      let token = __2.Token.fromTokenProperties(tokenIdentifier, tokenProperties);\n\n      return __2.createBalanceBuilder(token);\n    });\n  }\n\n  getBalance(address, balanceBuilder) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let typedAddress = nativeSerializer_1.NativeSerializer.convertNativeToAddress(address, new argumentErrorContext_1.ArgumentErrorContext(\"getBalance\", \"0\", new __1.EndpointParameterDefinition(\"account\", \"\", new __1.AddressType())));\n\n      if (balanceBuilder.getToken().isEgld()) {\n        return yield this.provider.getAccount(typedAddress).then(account => account.balance);\n      }\n\n      let tokenData = yield this.getTokenData(typedAddress, balanceBuilder);\n      return balanceBuilder.raw(tokenData.balance);\n    });\n  }\n\n  getBalanceList(address, balanceBuilder) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let typedAddress = nativeSerializer_1.NativeSerializer.convertNativeToAddress(address, new argumentErrorContext_1.ArgumentErrorContext(\"getBalanceList\", \"0\", new __1.EndpointParameterDefinition(\"account\", \"\", new __1.AddressType())));\n\n      if (balanceBuilder.getToken().isNft() && balanceBuilder.hasNonce()) {\n        return [yield this.getBalance(typedAddress, balanceBuilder)];\n      }\n\n      return yield this.provider.getAddressEsdtList(typedAddress).then(esdtList => {\n        let tokenBalances = [];\n        let filterIdentifier = balanceBuilder.getTokenIdentifier() + '-';\n\n        for (let [identifier, details] of Object.entries(esdtList)) {\n          if (identifier.startsWith(filterIdentifier)) {\n            tokenBalances.push(balanceBuilder.nonce(details.nonce).raw(details.balance));\n          }\n        }\n\n        return tokenBalances;\n      });\n    });\n  }\n\n  getTokenData(address, balanceBuilder) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let tokenIdentifier = balanceBuilder.getTokenIdentifier();\n\n      if (balanceBuilder.getToken().isFungible()) {\n        return yield this.provider.getAddressEsdt(address, tokenIdentifier);\n      } else {\n        return yield this.provider.getAddressNft(address, tokenIdentifier, balanceBuilder.getNonce());\n      }\n    });\n  }\n\n  currentNonce() {\n    return __awaiter(this, void 0, void 0, function* () {\n      let networkStatus = yield this.provider.getNetworkStatus();\n      return networkStatus.Nonce;\n    });\n  }\n\n}\n\nexports.SystemWrapper = SystemWrapper;\n\nfunction getGasFromValue(baseGas, value) {\n  if (!value || value.isEgld()) {\n    return Math.max(baseGas, SystemConstants.MIN_TRANSACTION_GAS);\n  }\n\n  if (value.token.isFungible()) {\n    return baseGas + SystemConstants.ESDT_TRANSFER_GAS_LIMIT;\n  } else {\n    return baseGas + SystemConstants.ESDT_NFT_TRANSFER_GAS_LIMIT;\n  }\n}\n\nexports.getGasFromValue = getGasFromValue;","map":{"version":3,"mappings":"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","names":["SystemConstants","path_1","join","__dirname","__2","exports","SystemWrapper","chainSendContext_1","constructor","provider","context","sendContract","esdtSystemContract","issueCost","builtinFunctions","sendWrapper","loadWrapper","projectPath","filenameHint","__1","loadProject","getEsdtContractConfig","ownerAddress","baseIssuingCost","minTokenNameLength","maxTokenNameLength","query","getContractConfig","raw","load","logger","SYSTEM_ABI_PATH","address","ESDT_CONTRACT_ADDRESS","testutils_1","Zero","contractConfig","send","receiver","nativeSerializer_1","convertNativeToAddress","argumentErrorContext_1","autoGas","call","issueFungible","args","resultingCalls","issueResult","gas","ESDT_ISSUE_GAS_LIMIT","value","results","issue","tokenIdentifier","extractFieldsFromEsdtTransferDataField","data","Buffer","from","toString","recallToken","issueSemiFungible","issueNonFungible","esdtNftCreate","balanceBuilder","nonce","getSender","ESDT_BASE_GAS_LIMIT","ESDTNFTCreate","tokenProperties","getTokenProperties","token","fromTokenProperties","getBalance","typedAddress","getToken","isEgld","getAccount","then","account","balance","tokenData","getTokenData","getBalanceList","isNft","hasNonce","getAddressEsdtList","esdtList","tokenBalances","filterIdentifier","getTokenIdentifier","identifier","details","Object","entries","startsWith","push","isFungible","getAddressEsdt","getAddressNft","getNonce","currentNonce","networkStatus","getNetworkStatus","Nonce","getGasFromValue","baseGas","Math","max","MIN_TRANSACTION_GAS","ESDT_TRANSFER_GAS_LIMIT","ESDT_NFT_TRANSFER_GAS_LIMIT"],"sourceRoot":"","sources":["../../../src/smartcontracts/wrapper/systemWrapper.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}