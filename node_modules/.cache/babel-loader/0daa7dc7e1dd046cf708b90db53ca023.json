{"ast":null,"code":"'use strict';\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RPCMethodMap = void 0;\n\nconst thor_devkit_1 = require(\"thor-devkit\");\n\nconst utils = require(\"../utils\");\n\nconst simple_http_1 = require(\"./simple-http\");\n\nconst debug = require('debug')('thor:http-provider:rpc');\n\nexports.RPCMethodMap = new Map();\n\nconst getRevertReason = returned => {\n  const ErrorStringMatcher = /^0x08c379a0/i;\n  const PanicUint256Matcher = /^0x4e487b71/i;\n\n  try {\n    if (ErrorStringMatcher.test(returned)) {\n      return thor_devkit_1.abi.decodeParameter('string', returned.replace(ErrorStringMatcher, '0x'));\n    }\n\n    if (PanicUint256Matcher.test(returned)) {\n      return `Panic(0x${parseInt(thor_devkit_1.abi.decodeParameter('uint256', returned.replace(PanicUint256Matcher, '0x')), 10).toString(16)})`;\n    }\n\n    return null;\n  } catch (_a) {\n    return null;\n  }\n};\n\nconst HTTPPostProcessor = function (res) {\n  if (res.Code === 0) {\n    return Promise.reject(new Error(`[thor-provider] Invalid response, check the host`));\n  }\n\n  if (res.Code !== 200) {\n    return Promise.reject(new Error(res.Body ? res.Body : '[thor-provider] Invalid response code from provider: ' + res.Code));\n  }\n\n  return Promise.resolve(res.Body);\n};\n\nexports.RPCMethodMap.set('eth_getBlockByNumber', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/' + utils.fromETHBlockNumber(rpc.params[0]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_getBlockByHash', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/' + rpc.params[0];\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_blockNumber', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/best';\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.number);\n  });\n});\nexports.RPCMethodMap.set('eth_getBalance', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/accounts/' + rpc.params[0] + '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.balance);\n  });\n});\nexports.RPCMethodMap.set('eth_getEnergy', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/accounts/' + rpc.params[0] + '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.energy);\n  });\n});\nexports.RPCMethodMap.set('eth_getCode', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/accounts/' + rpc.params[0] + '/code?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.code);\n  });\n});\nexports.RPCMethodMap.set('eth_getStorageAt', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/accounts/' + rpc.params[0] + '/storage/' + utils.leftPadToBytes32(rpc.params[1]) + '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[2]);\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.value);\n  });\n});\nexports.RPCMethodMap.set('eth_sendRawTransaction', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/transactions';\n    const reqBody = {\n      raw: rpc.params[0]\n    };\n    const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n    return rpc.makeResult(!res ? null : res.id);\n  });\n});\nexports.RPCMethodMap.set('eth_getTransactionByHash', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/transactions/' + rpc.params[0];\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n\n    if (!res) {\n      return rpc.makeResult(null);\n    }\n\n    res.blockNumber = res.meta.blockNumber;\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_getTransactionReceipt', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/transactions/' + rpc.params[0] + '/receipt';\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n\n    if (!res) {\n      return rpc.makeResult(null);\n    }\n\n    res.blockNumber = res.meta.blockNumber;\n    res.blockHash = res.meta.blockID;\n    res.transactionHash = res.meta.txID; // For compatible with ethereum's receipt\n\n    if (res.reverted) {\n      res.status = '0x0';\n    } else {\n      res.status = '0x1';\n    }\n\n    if (res.outputs.length === 1) {\n      res.contractAddress = res.outputs[0].contractAddress;\n    }\n\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_call', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const extraURI = '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const URL = host + '/accounts/*' + extraURI;\n    const reqBody = {\n      clauses: [{\n        to: rpc.params[0].to || null,\n        value: rpc.params[0].value || '',\n        data: rpc.params[0].data || '0x'\n      }],\n      gasPrice: rpc.params[0].gasPrice || undefined\n    };\n\n    if (rpc.params[0].gas) {\n      if (typeof rpc.params[0].gas === 'number') {\n        reqBody.gas = rpc.params[0].gas;\n      } else {\n        reqBody.gas = parseInt(utils.sanitizeHex(rpc.params[0].gas), 16);\n      }\n    }\n\n    if (rpc.params[0].from) {\n      reqBody.caller = rpc.params[0].from;\n    }\n\n    const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n    debug('eth_call returns', res);\n\n    if (!res || res.length === 0) {\n      return rpc.makeResult(null);\n    } else {\n      const result = res[0];\n\n      if (result.reverted || result.vmError) {\n        if (result.data) {\n          const reason = getRevertReason(result.data);\n\n          if (reason) {\n            return rpc.makeError('VM reverted: ' + reason);\n          }\n        }\n\n        return rpc.makeError('VM executing failed' + (result.vmError ? ': ' + result.vmError : ''));\n      } else {\n        return rpc.makeResult(result.data === '0x' ? '' : result.data);\n      }\n    }\n  });\n});\nexports.RPCMethodMap.set('eth_estimateGas', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const extraURI = '?revision=' + utils.fromETHBlockNumberOrHash(rpc.params[1]);\n    const URL = host + '/accounts/*' + extraURI;\n    const reqBody = {\n      clauses: [{\n        to: rpc.params[0].to || null,\n        value: rpc.params[0].value || '',\n        data: rpc.params[0].data || '0x'\n      }],\n      gasPrice: rpc.params[0].gasPrice || undefined\n    };\n\n    if (rpc.params[0].gas) {\n      if (typeof rpc.params[0].gas === 'number') {\n        reqBody.gas = rpc.params[0].gas;\n      } else {\n        reqBody.gas = parseInt(utils.sanitizeHex(rpc.params[0].gas), 16);\n      }\n    }\n\n    if (rpc.params[0].from) {\n      reqBody.caller = rpc.params[0].from;\n    }\n\n    const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n\n    if (!res || res.length === 0) {\n      return rpc.makeResult(null);\n    } else {\n      const result = res[0];\n\n      if (result.reverted || result.vmError) {\n        if (result.data) {\n          const reason = getRevertReason(result.data);\n\n          if (reason) {\n            return rpc.makeError('Gas estimation failed with VM reverted: ' + reason);\n          }\n        }\n\n        return rpc.makeError('Gas estimation failed' + (result.vmError ? ': ' + result.vmError : ''));\n      } else {\n        debug('VM gas:', result.gasUsed); // ignore the overflow since block gas limit is uint64 and JavaScript's max number is 2^53\n\n        const intrinsicGas = thor_devkit_1.Transaction.intrinsicGas(reqBody.clauses); // increase vm gas by 15000 for safe since it's estimated from current block state, final state for the transaction is not determined for now\n\n        return rpc.makeResult(intrinsicGas + (result.gasUsed ? result.gasUsed + 15000 : 0));\n      }\n    }\n  });\n});\nexports.RPCMethodMap.set('eth_getLogs', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const reqBody = utils.formatLogQuery(rpc.params[0]);\n    const URL = host + '/logs/event';\n    const res = yield simple_http_1.HTTP.post(URL, reqBody, timeout).then(HTTPPostProcessor);\n\n    if (!res) {\n      return rpc.makeResult(null);\n    }\n\n    for (const item of res) {\n      item.blockNumber = item.meta.blockNumber;\n      item.blockHash = item.meta.blockID;\n      item.transactionHash = item.meta.txID;\n    }\n\n    return rpc.makeResult(res);\n  });\n});\nexports.RPCMethodMap.set('eth_getBlockRef', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/best';\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n\n    if (!res || !res.id) {\n      return rpc.makeResult(null);\n    }\n\n    return rpc.makeResult(res.id.substr(0, 18));\n  });\n});\nexports.RPCMethodMap.set('eth_getChainTag', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const URL = host + '/blocks/0';\n    const res = yield simple_http_1.HTTP.get(URL, timeout).then(HTTPPostProcessor);\n\n    if (!res || !res.id || res.id.length !== 66) {\n      return rpc.makeResult(null);\n    }\n\n    return rpc.makeResult('0x' + res.id.substr(64, 2));\n  });\n});\nexports.RPCMethodMap.set('eth_gasPrice', function (rpc, host, timeout) {\n  return __awaiter(this, void 0, void 0, function* () {\n    return rpc.makeResult('0x1');\n  });\n});","map":{"version":3,"mappings":"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","names":["debug","require","exports","Map","getRevertReason","returned","ErrorStringMatcher","PanicUint256Matcher","test","thor_devkit_1","decodeParameter","replace","parseInt","toString","HTTPPostProcessor","res","Code","Promise","reject","Error","Body","resolve","set","rpc","host","timeout","URL","utils","fromETHBlockNumber","params","simple_http_1","get","then","makeResult","number","fromETHBlockNumberOrHash","balance","energy","code","leftPadToBytes32","value","reqBody","raw","post","id","blockNumber","meta","blockHash","blockID","transactionHash","txID","reverted","status","outputs","length","contractAddress","extraURI","clauses","to","data","gasPrice","undefined","gas","sanitizeHex","from","caller","result","vmError","reason","makeError","gasUsed","intrinsicGas","formatLogQuery","item","substr"],"sourceRoot":"","sources":["../../src/provider/rpc-methods.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}