{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NetworkStatus = void 0;\n/**\n * An object holding network status configuration parameters.\n */\n\nclass NetworkStatus {\n  constructor() {\n    this.CurrentRound = 0;\n    this.EpochNumber = 0;\n    this.HighestFinalNonce = 0;\n    this.Nonce = 0;\n    this.NonceAtEpochStart = 0;\n    this.NoncesPassedInCurrentEpoch = 0;\n    this.RoundAtEpochStart = 0;\n    this.RoundsPassedInCurrentEpoch = 0;\n    this.RoundsPerEpoch = 0;\n  }\n  /**\n   * Gets the default network status object (think of the Singleton pattern).\n   */\n\n\n  static getDefault() {\n    if (!NetworkStatus.default) {\n      NetworkStatus.default = new NetworkStatus();\n    }\n\n    return NetworkStatus.default;\n  }\n  /**\n   * Synchronizes a configuration object by querying the node, through a {@link IProvider}.\n   * @param provider The provider to use\n   */\n\n\n  sync(provider) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let fresh = yield provider.getNetworkStatus();\n      Object.assign(this, fresh);\n    });\n  }\n  /**\n   * Constructs a configuration object from a HTTP response (as returned by the provider).\n   */\n\n\n  static fromHttpResponse(payload) {\n    let networkStatus = new NetworkStatus();\n    networkStatus.CurrentRound = Number(payload[\"erd_current_round\"]);\n    networkStatus.EpochNumber = Number(payload[\"erd_epoch_number\"]);\n    networkStatus.HighestFinalNonce = Number(payload[\"erd_highest_final_nonce\"]);\n    networkStatus.Nonce = Number(payload[\"erd_nonce\"]);\n    networkStatus.NonceAtEpochStart = Number(payload[\"erd_nonce_at_epoch_start\"]);\n    networkStatus.NoncesPassedInCurrentEpoch = Number(payload[\"erd_nonces_passed_in_current_epoch\"]);\n    networkStatus.RoundAtEpochStart = Number(payload[\"erd_round_at_epoch_start\"]);\n    networkStatus.RoundsPassedInCurrentEpoch = Number(payload[\"erd_rounds_passed_in_current_epoch\"]);\n    networkStatus.RoundsPerEpoch = Number(payload[\"erd_rounds_per_epoch\"]);\n    return networkStatus;\n  }\n\n}\n\nexports.NetworkStatus = NetworkStatus;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;;AAGA,MAAaA,aAAb,CAA0B;AAgDtBC;AACI,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKC,WAAL,GAAmB,CAAnB;AACA,SAAKC,iBAAL,GAAyB,CAAzB;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,iBAAL,GAAyB,CAAzB;AACA,SAAKC,0BAAL,GAAkC,CAAlC;AACA,SAAKC,iBAAL,GAAyB,CAAzB;AACA,SAAKC,0BAAL,GAAkC,CAAlC;AACA,SAAKC,cAAL,GAAsB,CAAtB;AACH;AAED;;;;;AAGiB,SAAVC,UAAU;AACb,QAAI,CAACX,aAAa,CAACY,OAAnB,EAA4B;AACxBZ,mBAAa,CAACY,OAAd,GAAwB,IAAIZ,aAAJ,EAAxB;AACH;;AAED,WAAOA,aAAa,CAACY,OAArB;AACH;AAED;;;;;;AAIMC,MAAI,CAACC,QAAD,EAAoB;;AAC1B,UAAIC,KAAK,GAAkB,MAAMD,QAAQ,CAACE,gBAAT,EAAjC;AACAC,YAAM,CAACC,MAAP,CAAc,IAAd,EAAoBH,KAApB;AACH;AAAA;AAED;;;;;AAGuB,SAAhBI,gBAAgB,CAACC,OAAD,EAAa;AAChC,QAAIC,aAAa,GAAG,IAAIrB,aAAJ,EAApB;AAEAqB,iBAAa,CAACnB,YAAd,GAA6BoB,MAAM,CAACF,OAAO,CAAC,mBAAD,CAAR,CAAnC;AACAC,iBAAa,CAAClB,WAAd,GAA4BmB,MAAM,CAACF,OAAO,CAAC,kBAAD,CAAR,CAAlC;AACAC,iBAAa,CAACjB,iBAAd,GAAkCkB,MAAM,CAACF,OAAO,CAAC,yBAAD,CAAR,CAAxC;AACAC,iBAAa,CAAChB,KAAd,GAAsBiB,MAAM,CAACF,OAAO,CAAC,WAAD,CAAR,CAA5B;AACAC,iBAAa,CAACf,iBAAd,GAAkCgB,MAAM,CAACF,OAAO,CAAC,0BAAD,CAAR,CAAxC;AACAC,iBAAa,CAACd,0BAAd,GAA2Ce,MAAM,CAACF,OAAO,CAAC,oCAAD,CAAR,CAAjD;AACAC,iBAAa,CAACb,iBAAd,GAAkCc,MAAM,CAACF,OAAO,CAAC,0BAAD,CAAR,CAAxC;AACAC,iBAAa,CAACZ,0BAAd,GAA2Ca,MAAM,CAACF,OAAO,CAAC,oCAAD,CAAR,CAAjD;AACAC,iBAAa,CAACX,cAAd,GAA+BY,MAAM,CAACF,OAAO,CAAC,sBAAD,CAAR,CAArC;AAEA,WAAOC,aAAP;AACH;;AAjGqB;;AAA1BE","names":["NetworkStatus","constructor","CurrentRound","EpochNumber","HighestFinalNonce","Nonce","NonceAtEpochStart","NoncesPassedInCurrentEpoch","RoundAtEpochStart","RoundsPassedInCurrentEpoch","RoundsPerEpoch","getDefault","default","sync","provider","fresh","getNetworkStatus","Object","assign","fromHttpResponse","payload","networkStatus","Number","exports"],"sourceRoot":"","sources":["../src/networkStatus.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}